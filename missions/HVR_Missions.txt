hvr_slot1_branch = {
  slot = 1
  generic = no
  ai = yes
  has_country_shield = yes
  potential = {
    tag = HVR
  }
  HVR_ties_with_moon = {
    icon = mission_touhou_lunarian_throne
    position = 3
    required_missions = {
      HVR_deal_with_nobles
    }
    provinces_to_highlight = {}
    trigger = {
      OR = {
        AND = {
          LCU = {
            has_opinion = {
              who = ROOT
              value = 100
            }
            trust = {
              who = ROOT
              value = 80
            }
          }
          5320 = {
            owned_by = LCU
          }
        }
        has_spy_network_in = {
          who = LCU
          value = 100
        }
        NOT = {
          exists = LCU
        }
      }
    }
    effect = {
      custom_tooltip = hvr_ties_with_moon_tooltip_reward
      if = {
        limit = {
          LCU = {
            has_opinion = {
              who = ROOT
              value = 100
            }
            trust = {
              who = ROOT
              value = 80
            }
          }
        }
        LCU = {
          country_event = {
            id = flavor_hvr.6
          }
        }
      }
      else_if = {
        limit = {
          has_spy_network_in = {
            who = LCU
            value = 100
          }
        }
        add_casus_belli = {
          type = cb_touhou_mission_personal_union_war
          target = LCU
        }
      }
      else_if = {
        limit = {
          NOT = {
            exists = LCU
          }
        }
        Western_moon_state = {
          limit = {
            NOT = {
              is_core = ROOT
            }
            NOT = {
              is_permanent_claim = ROOT
            }
          }
          add_permanent_claim = ROOT
        }
        Southern_moon_state = {
          limit = {
            NOT = {
              is_core = ROOT
            }
            NOT = {
              is_permanent_claim = ROOT
            }
          }
          add_permanent_claim = ROOT
        }
      }
    }
  }
  HVR_lunarian_throne = {
    icon = mission_touhou_former_glory_of_lunarians
    position = 4
    required_missions = {
      HVR_ties_with_moon
    }
    provinces_to_highlight = {
      OR = {
        area = Western_moon_state
        area = Southern_moon_state
      }
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    trigger = {
      num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
        OR = {
          area = Western_moon_state
          area = Southern_moon_state
        }
        value = 10
      }
    }
    effect = {
      if = {
        limit = {
          exists = LCU
          LCU = {
            is_subject_of = HVR
          }
        }
        LCU = {
          moon_region = {
            add_core = LCU
          }
        }
      }
      else = {
        Northern_moon_state = {
          limit = {
            NOT = {
              is_core = ROOT
            }
            NOT = {
              is_permanent_claim = ROOT
            }
          }
          add_permanent_claim = ROOT
        }
        Uncolonized_moon_state = {
          limit = {
            NOT = {
              is_core = ROOT
            }
            NOT = {
              is_permanent_claim = ROOT
            }
          }
          add_permanent_claim = ROOT
        }
        Hecetias_colony = {
          limit = {
            NOT = {
              is_core = ROOT
            }
            NOT = {
              is_permanent_claim = ROOT
            }
          }
          add_permanent_claim = ROOT
        }
      }
    }
  }
  HVR_former_glory_of_lcu = {
    icon = mission_lunar_empire
    position = 5
    required_missions = {
      HVR_lunarian_throne
    }
    provinces_to_highlight = {
      OR = {
        area = Northern_moon_state
        area = Uncolonized_moon_state
        area = Hecetias_colony
      }
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    trigger = {
      num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
        area = Northern_moon_state
        value = 5
      }
      num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
        area = Hecetias_colony
        value = 5
      }
      5334 = {
        country_or_non_sovereign_subject_holds = ROOT
      }
      5335 = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    effect = {
      custom_tooltip = hvr_unlock_yorihime_tooltip
      if = {
        limit = {
          exists = LCU
          LCU = {
            is_subject_of = HVR
          }
        }
        LCU = {
          th_colonize_dev_province = {
            province = 5338
          }
          th_colonize_dev_province = {
            province = 5337
          }
          th_colonize_dev_province = {
            province = 5336
          }
        }
      }
      else = {
        th_colonize_dev_province = {
          province = 5338
        }
        th_colonize_dev_province = {
          province = 5337
        }
        th_colonize_dev_province = {
          province = 5336
        }
      }
      hidden_effect = {
        th_enable_touhou_advisor = {
          advisor = th_advisor_yorihime
        }
      }
    }
  }
  HVR_dragon_god = {
    icon = mission_dragon_god
    position = 6
    required_missions = {
      HVR_former_glory_of_lcu
    }
    provinces_to_highlight = {
      region = moon_region
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
      NOT = {
        has_manpower_building_trigger = yes
      }
      NOT = {
        has_tax_building_trigger = yes
      }
      NOT = {
        has_trade_building_trigger = yes
      }
    }
    trigger = {
      custom_trigger_tooltip = {
        tooltip = HVR_yorihime_recruited_tooltip
        th_advisor_yorihime = 3
      }
      moon_region = {
        country_or_non_sovereign_subject_holds = ROOT
        type = all
      }
      num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
        region = moon_region
        OR = {
          has_manpower_building_trigger = yes
          has_tax_building_trigger = yes
          has_trade_building_trigger = yes
        }
        value = 12
      }
    }
    effect = {
      country_event = {
        id = flavor_hvr.9
      }
    }
  }
  HVR_weather_control = {
    icon = mission_iku_weather_control
    position = 8
    required_missions = {}
    provinces_to_highlight = {}
    trigger = {
      custom_trigger_tooltip = {
        tooltip = HVR_weather_control_tt
        check_variable = {
          which = hvr_weather_action_counter
          value = 10
        }
      }
    }
    effect = {
      country_event = {
        id = flavor_hvr.10
      }
    }
  }
  HVR_learn_from_suwako = {
    icon = mission_learn_from_suwako
    position = 9
    required_missions = {
      HVR_weather_control
    }
    provinces_to_highlight = {
      province_id = 4998
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    trigger = {
      OR = {
        AND = {
          alliance_with = MRY
          MRY = {
            has_opinion = {
              who = ROOT
              value = 100
            }
            trust = {
              who = ROOT
              value = 60
            }
          }
        }
        4998 = {
          owned_by = ROOT
        }
      }
    }
    effect = {
      country_event = {
        id = flavor_hvr.11
      }
    }
  }
  HVR_mastery_over_nature = {
    icon = mission_mastery_over_nature
    position = 10
    required_missions = {
      HVR_learn_from_suwako
    }
    provinces_to_highlight = {}
    trigger = {
      custom_trigger_tooltip = {
        tooltip = HVR_weather_control_tt_lvl_2
        check_variable = {
          which = hvr_weather_action_counter
          value = 30
        }
      }
    }
    effect = {
      country_event = {
        id = flavor_hvr.12
      }
    }
  }
  HVR_gambling_halls_of_heaven = {
    icon = mission_african_gold
    position = 11
    required_missions = {}
    provinces_to_highlight = {
      province_id = 5313
      OR = {
        NOT = {
          development = 15
        }
        NOT = {
          has_trade_building_trigger = yes
        }
        NOT = {
          has_courthouse_building_trigger = yes
        }
      }
    }
    trigger = {
      custom_trigger_tooltip = {
        tooltip = HVR_deal_with_yukari_tooltip
        OR = {
          MHG = {
            has_opinion = {
              who = ROOT
              value = 100
            }
          }
          has_country_flag = hvr_yukari_beaten_up
        }
      }
      treasury = 250
      5313 = {
        has_trade_building_trigger = yes
        has_courthouse_building_trigger = yes
        development = 15
      }
    }
    effect = {
      country_event = {
        id = flavor_hvr.41
      }
    }
  }
  HVR_resort_paradise = {
    icon = mission_potosi_silver
    position = 12
    required_missions = {
      HVR_gambling_halls_of_heaven
    }
    provinces_to_highlight = {
      OR = {
        province_id = 5036
        province_id = 5052
        province_id = 5031
      }
      NOT = {
        development = 25
      }
    }
    trigger = {
      treasury = 2500
      5036 = {
        development = 25
        country_or_non_sovereign_subject_holds = ROOT
      }
      5052 = {
        development = 25
        country_or_non_sovereign_subject_holds = ROOT
      }
      5031 = {
        development = 25
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    effect = {
      country_event = {
        id = flavor_hvr.42
      }
    }
  }
  HVR_making_our_resort_even_better = {
    icon = develop_provence
    position = 13
    required_missions = {
      HVR_resort_paradise
    }
    provinces_to_highlight = {}
    trigger = {
      custom_trigger_tooltip = {
        tooltip = HVR_our_monument_needs_to_be_upgraded
        if = {
          limit = {
            has_dlc = "Leviathan"
          }
          OR = {
            5052 = {
              has_great_project = {
                type = th_monument_hvr_resort
                tier = 2
              }
              owned_by = ROOT
            }
            5031 = {
              has_great_project = {
                type = th_monument_hvr_resort
                tier = 2
              }
              owned_by = ROOT
            }
            5036 = {
              has_great_project = {
                type = th_monument_hvr_resort
                tier = 2
              }
              owned_by = ROOT
            }
          }
        }
        else = {
          total_development = 1500
        }
      }
      NOT = {
        great_power_rank = 4
      }
      is_great_power = yes
      prestige = 90
      power_projection = 75
    }
    effect = {
      custom_tooltip = HVR_upgrade_resort_even_more_tooltip
      if = {
        limit = {
          has_dlc = "Leviathan"
          5036 = {
            has_great_project = {
              type = th_monument_hvr_resort
              tier = 2
            }
          }
        }
        hidden_effect = {
          5036 = {
            set_great_project_tier_3 = {
              type = th_monument_hvr_resort
            }
          }
        }
        add_country_modifier = {
          name = hvr_foreign_mining_masters
          duration = -1
        }
      }
      else_if = {
        limit = {
          has_dlc = "Leviathan"
          5052 = {
            has_great_project = {
              type = th_monument_hvr_resort
              tier = 2
            }
          }
        }
        hidden_effect = {
          5052 = {
            set_great_project_tier_3 = {
              type = th_monument_hvr_resort
            }
          }
        }
        add_country_modifier = {
          name = hvr_foreign_mining_masters
          duration = -1
        }
      }
      else_if = {
        limit = {
          has_dlc = "Leviathan"
          5031 = {
            has_great_project = {
              type = th_monument_hvr_resort
              tier = 2
            }
          }
        }
        hidden_effect = {
          5031 = {
            set_great_project_tier_3 = {
              type = th_monument_hvr_resort
            }
          }
        }
        add_country_modifier = {
          name = hvr_foreign_mining_masters
          duration = -1
        }
      }
      else = {
        add_adm_power = 150
        add_dip_power = 150
        add_mil_power = 150
        add_country_modifier = {
          name = hvr_foreign_mining_masters
          duration = -1
        }
      }
    }
  }
}
hvr_slot2_branch = {
  slot = 2
  generic = no
  ai = yes
  has_country_shield = yes
  potential = {
    tag = HVR
  }
  HVR_deal_with_nobles = {
    icon = imperial_ascendancy
    position = 2
    required_missions = {
      HVR_return_of_tenshi
    }
    provinces_to_highlight = {}
    trigger = {
      has_estate_privilege = th_estate_heavenly_nobles_command_of_the_military
      army_size_percentage = 1
      num_of_generals = 1
    }
    effect = {
      custom_tooltip = hvr_small_deal_with_nobles_tooltip
      World_of_fantasies = {
        limit = {
          NOT = {
            is_core = ROOT
          }
          NOT = {
            is_permanent_claim = ROOT
          }
        }
        add_permanent_claim = ROOT
      }
      Konngaras_state = {
        limit = {
          NOT = {
            is_core = ROOT
          }
          NOT = {
            is_permanent_claim = ROOT
          }
        }
        add_permanent_claim = ROOT
      }
      Yumemi_space_state = {
        limit = {
          NOT = {
            is_core = ROOT
          }
          NOT = {
            is_permanent_claim = ROOT
          }
        }
        add_permanent_claim = ROOT
      }
      hidden_effect = {
        orbital_region = {
          discover_country = LCU
        }
        add_country_modifier = {
          name = hvr_disloyal_nobles_level_2
          duration = -1
        }
        remove_country_modifier = hvr_disloyal_nobles
      }
    }
  }
  HVR_space_ship = {
    icon = mission_touhou_yumemi
    position = 3
    required_missions = {
      HVR_deal_with_nobles
    }
    provinces_to_highlight = {
      area = Yumemi_space_state
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    trigger = {
      Yumemi_space_state = {
        type = all
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    effect = {
      add_country_modifier = {
        name = hvr_remnants_of_unusual_technology
        duration = 7300
      }
      Old_hakurei_shrine_state = {
        limit = {
          NOT = {
            is_core = ROOT
          }
          NOT = {
            is_permanent_claim = ROOT
          }
        }
        add_permanent_claim = ROOT
      }
      Eastern_old_hakurei_shrine_state = {
        limit = {
          NOT = {
            is_core = ROOT
          }
          NOT = {
            is_permanent_claim = ROOT
          }
        }
        add_permanent_claim = ROOT
      }
    }
  }
  HVR_fake_hakurei = {
    icon = mission_touhou_old_reimu
    position = 4
    required_missions = {
      HVR_space_ship
    }
    provinces_to_highlight = {
      OR = {
        area = Old_hakurei_shrine_state
        area = Eastern_old_hakurei_shrine_state
      }
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    trigger = {
      AND = {
        num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
          OR = {
            area = Old_hakurei_shrine_state
            area = Eastern_old_hakurei_shrine_state
          }
          value = 5
        }
        5183 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
      }
    }
    effect = {
      country_event = {
        id = flavor_hvr.2
      }
      add_country_modifier = {
        name = hvr_integrate_heretics
        duration = 7300
      }
      Makai_area = {
        limit = {
          NOT = {
            is_core = ROOT
          }
          NOT = {
            is_permanent_claim = ROOT
          }
        }
        add_permanent_claim = ROOT
      }
      Makai_peninsula_state = {
        limit = {
          NOT = {
            is_core = ROOT
          }
          NOT = {
            is_permanent_claim = ROOT
          }
        }
        add_permanent_claim = ROOT
      }
      Western_makai_state = {
        limit = {
          NOT = {
            is_core = ROOT
          }
          NOT = {
            is_permanent_claim = ROOT
          }
        }
        add_permanent_claim = ROOT
      }
      Makai_coast_state = {
        limit = {
          NOT = {
            is_core = ROOT
          }
          NOT = {
            is_permanent_claim = ROOT
          }
        }
        add_permanent_claim = ROOT
      }
    }
  }
  HVR_dont_deal_with_devil = {
    icon = mission_touhou_shinki
    position = 5
    required_missions = {
      HVR_fake_hakurei
    }
    provinces_to_highlight = {
      OR = {
        area = Makai_area
        area = Makai_peninsula_state
        area = Western_makai_state
        area = Makai_coast_state
      }
      NOT = {
        owned_by = ROOT
      }
    }
    trigger = {
      AND = {
        Makai_area = {
          type = all
          owned_by = ROOT
        }
        Makai_peninsula_state = {
          type = all
          owned_by = ROOT
        }
        Western_makai_state = {
          type = all
          owned_by = ROOT
        }
        Makai_coast_state = {
          type = all
          owned_by = ROOT
        }
      }
    }
    effect = {
      country_event = {
        id = flavor_hvr.3
      }
    }
  }
  HVR_make_paradise_out_of_hell = {
    icon = mission_ice_fortification
    position = 6
    required_missions = {
      HVR_dont_deal_with_devil
    }
    provinces_to_highlight = {
      OR = {
        area = Makai_peninsula_state
        area = Makai_area
        area = Western_makai_state
        area = Makai_coast_state
      }
      NOT = {
        development = 15
      }
    }
    trigger = {
      Makai_peninsula_state = {
        type = all
        development = 15
        owned_by = ROOT
      }
      Makai_area = {
        type = all
        development = 15
        owned_by = ROOT
      }
      Western_makai_state = {
        type = all
        development = 15
        owned_by = ROOT
      }
      Makai_coast_state = {
        type = all
        development = 15
        owned_by = ROOT
      }
      5019 = {
        owned_by = ROOT
        th_has_up_to_date_fort_building = {
          tag = ROOT
        }
      }
      5209 = {
        owned_by = ROOT
        th_has_up_to_date_fort_building = {
          tag = ROOT
        }
      }
      5214 = {
        owned_by = ROOT
        th_has_up_to_date_fort_building = {
          tag = ROOT
        }
      }
      5202 = {
        owned_by = ROOT
        th_has_up_to_date_fort_building = {
          tag = ROOT
        }
      }
    }
    effect = {
      5019 = {
        if = {
          limit = {
            has_building = fort_17th
          }
          remove_building = fort_17th
          add_building = fort_18th
        }
        else_if = {
          limit = {
            has_building = fort_16th
          }
          remove_building = fort_16th
          add_building = fort_17th
        }
        else_if = {
          limit = {
            has_building = fort_15th
          }
          remove_building = fort_15th
          add_building = fort_16th
        }
        add_province_modifier = {
          name = hvr_fortified_hell
          duration = -1
        }
      }
      5209 = {
        if = {
          limit = {
            has_building = fort_17th
          }
          remove_building = fort_17th
          add_building = fort_18th
        }
        else_if = {
          limit = {
            has_building = fort_16th
          }
          remove_building = fort_16th
          add_building = fort_17th
        }
        else_if = {
          limit = {
            has_building = fort_15th
          }
          remove_building = fort_15th
          add_building = fort_16th
        }
        add_province_modifier = {
          name = hvr_fortified_hell
          duration = -1
        }
      }
      5214 = {
        if = {
          limit = {
            has_building = fort_17th
          }
          remove_building = fort_17th
          add_building = fort_18th
        }
        else_if = {
          limit = {
            has_building = fort_16th
          }
          remove_building = fort_16th
          add_building = fort_17th
        }
        else_if = {
          limit = {
            has_building = fort_15th
          }
          remove_building = fort_15th
          add_building = fort_16th
        }
        add_province_modifier = {
          name = hvr_fortified_hell
          duration = -1
        }
      }
      5202 = {
        if = {
          limit = {
            has_building = fort_17th
          }
          remove_building = fort_17th
          add_building = fort_18th
        }
        else_if = {
          limit = {
            has_building = fort_16th
          }
          remove_building = fort_16th
          add_building = fort_17th
        }
        else_if = {
          limit = {
            has_building = fort_15th
          }
          remove_building = fort_15th
          add_building = fort_16th
        }
        add_province_modifier = {
          name = hvr_fortified_hell
          duration = -1
        }
      }
    }
  }
  HVR_trust_of_nobles = {
    icon = mission_english_absolutism
    position = 7
    required_missions = {
      HVR_make_paradise_out_of_hell
      HVR_dragon_god
      HVR_overtune_of_cannons
    }
    provinces_to_highlight = {}
    trigger = {
      estate_loyalty = {
        estate = estate_nobles
        loyalty = 50
      }
      num_of_estate_agendas_completed = {
        estate = estate_nobles
        value = 4
      }
    }
    effect = {
      custom_tooltip = HVR_loyal_nobles_tooltip
      th_increase_ruler_adm_stat = {
        adm = 1
      }
      remove_country_modifier = hvr_disloyal_nobles_level_2
      hidden_effect = {
        set_country_flag = hvr_loyal_nobles
      }
    }
  }
  HVR_red_shrine_maiden = {
    icon = mission_touhou_reimu
    position = 9
    required_missions = {}
    provinces_to_highlight = {
      area = Hakurei_state
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    trigger = {
      OR = {
        has_spy_network_in = {
          who = HKR
          value = 60
        }
        NOT = {
          exists = HKR
        }
      }
    }
    effect = {
      if = {
        limit = {
          exists = HKR
          HKR = {
            Hakurei_western_coast = {
              type = all
              NOT = {
                owned_by = HKR
              }
            }
          }
        }
        Hakurei_western_coast = {
          limit = {
            NOT = {
              is_permanent_claim = ROOT
            }
            NOT = {
              is_core = ROOT
            }
          }
          add_permanent_claim = ROOT
        }
      }
      else_if = {
        limit = {
          Hakurei_western_coast = {
            type = all
            owned_by = HKR
          }
        }
        add_casus_belli = {
          type = cb_hvr_hkr_war
          target = HKR
          months = 600
        }
      }
      else = {
        Hakurei_western_coast = {
          limit = {
            NOT = {
              is_permanent_claim = ROOT
            }
            NOT = {
              is_core = ROOT
            }
          }
          add_permanent_claim = ROOT
        }
      }
    }
  }
  HVR_favor_for_a_friend = {
    icon = mission_touhou_shion
    position = 10
    required_missions = {
      HVR_red_shrine_maiden
    }
    provinces_to_highlight = {
      area = Hakurei_western_coast
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    trigger = {
      if = {
        limit = {
          exists = HKR
          HKR = {
            Hakurei_western_coast = {
              type = all
              owned_by = HKR
            }
          }
        }
        is_in_war = {
          attacker_leader = ROOT
          defender_leader = HKR
          war_score = 80
        }
      }
      else = {
        Hakurei_western_coast = {
          type = all
          owned_by = ROOT
        }
      }
    }
    effect = {
      country_event = {
        id = flavor_hvr.51
      }
    }
  }
  HVR_dancing_halls = {
    icon = mission_dancing_halls
    position = 12
    required_missions = {
      HVR_gambling_halls_of_heaven
      HVR_blood_and_thunder
    }
    provinces_to_highlight = {
      province_id = 5312
      NOT = {
        development = 30
      }
    }
    trigger = {
      treasury = 2500
      5312 = {
        development = 30
        owned_by = ROOT
      }
      army_professionalism = 0.75
      OR = {
        navy_tradition = 75
        full_idea_group = maritime_ideas
        full_idea_group = naval_ideas
      }
    }
    effect = {
      country_event = {
        id = flavor_hvr.44
      }
    }
  }
  HVR_wrath_of_zeus = {
    icon = mission_zeus
    position = 14
    required_missions = {
      HVR_gods_and_humans
    }
    provinces_to_highlight = {
      OR = {
        area = northern_greece_area
        area = morea_area
        province_id = 3003
      }
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    trigger = {
      if = {
        limit = {
          exists = TUR
          TUR = {
            northern_greece_area = {
              type = all
              owned_by = TUR
            }
            morea_area = {
              type = all
              owned_by = TUR
            }
            macedonia_area = {
              type = all
              owned_by = TUR
            }
            thrace_area = {
              type = all
              owned_by = TUR
            }
          }
        }
        is_in_war = {
          attacker_leader = ROOT
          defender_leader = TUR
          war_score = 80
        }
      }
      else = {
        northern_greece_area = {
          type = all
          owned_by = ROOT
        }
        morea_area = {
          type = all
          owned_by = ROOT
        }
        3003 = {
          owned_by = ROOT
        }
      }
    }
    effect = {
      country_event = {
        id = flavor_hvr.5
      }
    }
  }
}
hvr_slot3_branch = {
  slot = 3
  generic = no
  ai = yes
  has_country_shield = yes
  potential = {
    tag = HVR
  }
  HVR_return_of_tenshi = {
    icon = mission_return_of_tenshi
    position = 1
    provinces_to_highlight = {}
    trigger = {
      custom_trigger_tooltip = {
        tooltip = HVR_tenshi_disaster_is_active_tooltip
        has_country_flag = th_tenshi_rebelion_already_fired
      }
    }
    effect = {
      country_event = {
        id = flavor_hvr.1
      }
    }
  }
  HVR_ghost_of_the_past = {
    icon = mission_touhou_power_of_mima
    position = 3
    required_missions = {
      HVR_deal_with_nobles
    }
    provinces_to_highlight = {
      area = World_of_fantasies
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    trigger = {
      num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
        area = World_of_fantasies
        value = 4
      }
    }
    effect = {
      add_country_modifier = {
        name = hvr_getting_rid_of_ghost
        duration = 7300
      }
      Rika_state = {
        limit = {
          NOT = {
            is_permanent_claim = ROOT
          }
          NOT = {
            is_core = ROOT
          }
        }
        add_permanent_claim = ROOT
      }
    }
  }
  HVR_panzerholics = {
    icon = mission_touhou_rika
    position = 4
    required_missions = {
      HVR_ghost_of_the_past
    }
    provinces_to_highlight = {
      area = Rika_state
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    trigger = {
      num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
        area = Rika_state
        value = 4
      }
      5148 = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    effect = {
      country_event = {
        id = flavor_hvr.13
      }
    }
  }
  HVR_engineers_of_kappapolis = {
    icon = mission_touhou_kappa_tinkerers
    position = 5
    required_missions = {
      HVR_panzerholics
    }
    provinces_to_highlight = {}
    trigger = {
      OR = {
        AND = {
          alliance_with = KPP
          KPP = {
            has_opinion = {
              who = ROOT
              value = 100
            }
          }
        }
        KPP = {
          has_opinion_modifier = {
            who = ROOT
            modifier = scornfully_insulted
          }
        }
        NOT = {
          exists = KPP
        }
      }
    }
    effect = {
      custom_tooltip = hvr_engineers_of_kappapolis_tooltip
      hidden_effect = {
        if = {
          limit = {
            AND = {
              alliance_with = KPP
              KPP = {
                has_opinion = {
                  who = ROOT
                  value = 100
                }
              }
            }
          }
          KPP = {
            country_event = {
              id = flavor_hvr.14
            }
          }
        }
        else_if = {
          limit = {
            KPP = {
              has_opinion = {
                who = ROOT
                value = -75
              }
              has_opinion_modifier = {
                who = ROOT
                modifier = scornfully_insulted
              }
            }
          }
          Kappa_delta = {
            limit = {
              NOT = {
                is_permanent_claim = ROOT
              }
              NOT = {
                is_core = ROOT
              }
            }
            add_permanent_claim = ROOT
          }
          Kappa_state = {
            limit = {
              NOT = {
                is_permanent_claim = ROOT
              }
              NOT = {
                is_core = ROOT
              }
            }
            add_permanent_claim = ROOT
          }
        }
        else = {
          Kappa_delta = {
            limit = {
              NOT = {
                is_permanent_claim = ROOT
              }
              NOT = {
                is_core = ROOT
              }
            }
            add_permanent_claim = ROOT
          }
          Kappa_state = {
            limit = {
              NOT = {
                is_permanent_claim = ROOT
              }
              NOT = {
                is_core = ROOT
              }
            }
            add_permanent_claim = ROOT
          }
        }
      }
    }
  }
  HVR_overtune_of_cannons = {
    icon = mission_touhou_kappa_missiles
    position = 6
    required_missions = {
      HVR_engineers_of_kappapolis
    }
    provinces_to_highlight = {
      OR = {
        area = Kappa_delta
        area = Kappa_state
      }
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    trigger = {
      OR = {
        custom_trigger_tooltip = {
          tooltip = hvr_deal_with_nitori_tooltip
          has_country_flag = hvr_deal_with_nitori
        }
        AND = {
          num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
            OR = {
              area = Kappa_delta
              area = Kappa_state
            }
            value = 4
          }
          4965 = {
            country_or_non_sovereign_subject_holds = ROOT
          }
        }
      }
    }
    effect = {
      add_country_modifier = {
        name = hvr_overtune_of_cannons_modifier
        duration = -1
      }
    }
  }
  HVR_empire_of_heaven_and_hell = {
    icon = mission_tenshi_empire
    position = 7
    required_missions = {}
    provinces_to_highlight = {
      OR = {
        region = makai_region
        region = orbital_region
      }
      NOT = {
        owned_by = ROOT
      }
    }
    trigger = {
      AND = {
        makai_region = {
          owned_by = ROOT
          type = all
        }
        orbital_region = {
          owned_by = ROOT
          type = all
        }
      }
    }
    effect = {
      add_country_modifier = {
        name = hvr_empire_of_heaven_and_hell_modifier
        duration = -1
      }
    }
  }
  HVR_mastery_over_the_country = {
    icon = mission_tenshi_throne
    position = 8
    required_missions = {
      HVR_empire_of_heaven_and_hell
      HVR_trust_of_nobles
      HVR_regained_trust_of_clergy
    }
    provinces_to_highlight = {}
    trigger = {
      if = {
        limit = {
          OR = {
            has_dlc = "Rights of Man"
            has_dlc = "Emperor"
          }
        }
        NOT = {
          great_power_rank = 7
        }
        is_great_power = yes
      }
      else = {
        total_development = 1000
      }
    }
    effect = {
      custom_tooltip = hvr_aurora_unlocked_ct
      hidden_effect = {
        set_country_flag = hvr_empire_of_heaven_and_hell_flag
      }
      if = {
        limit = {
          NOT = {
            government_rank = 3
          }
        }
        set_government_rank = 3
      }
      add_splendor = 400
      add_government_reform = Gensokyan_hvr_absolute_dictatorship
      end_disaster = th_return_of_tenshi_disaster
      set_country_flag = Gensokyan_hvr_absolute_dictatorship_flag
    }
  }
  HVR_trust_of_iku_nagae = {
    icon = mission_gain_trust_of_iku
    position = 9
    required_missions = {}
    provinces_to_highlight = {
      province_id = 5312
      OR = {
        NOT = {
          owned_by = ROOT
        }
        NOT = {
          development = 20
        }
        NOT = {
          has_courthouse_building_trigger = yes
        }
        NOT = {
          has_shipyard_building_trigger = yes
        }
      }
    }
    trigger = {
      treasury = 300
      5312 = {
        has_shipyard_building_trigger = yes
        has_courthouse_building_trigger = yes
        development = 20
      }
    }
    effect = {
      custom_tooltip = hvr_recruit_iku_as_admiral_tooltip_reward
      add_treasury = -300
      5312 = {
        add_building = town_hall
        add_building = grand_shipyard
        add_province_modifier = {
          name = hvr_iku_office
          duration = -1
        }
      }
      hidden_effect = {
        set_variable = {
          which = hvr_iku_level
          value = 1
        }
        set_variable = {
          which = hvr_won_iku_battles_counter
          value = 0
        }
        set_country_flag = hvr_can_hire_admiral_iku
      }
    }
  }
  HVR_approaching_storm = {
    icon = mission_iku_approaching_storm
    position = 10
    required_missions = {
      HVR_trust_of_iku_nagae
    }
    provinces_to_highlight = {
      owned_by = ROOT
      NOT = {
        has_manpower_building_trigger = yes
      }
    }
    trigger = {
      num_of_owned_provinces_with = {
        has_shipyard_building_trigger = yes
        value = 10
      }
      num_of_owned_provinces_with = {
        has_manpower_building_trigger = yes
        value = 10
      }
    }
    effect = {
      custom_tooltip = hvr_recruit_iku_as_general_tooltip_reward
      hidden_effect = {
        set_country_flag = hvr_can_hire_general_iku
        change_variable = {
          which = hvr_iku_level
          value = 1
        }
      }
      add_country_modifier = {
        name = hvr_heavenly_marines_are_ready_for_blood
        duration = -1
      }
    }
  }
  HVR_blood_and_thunder = {
    icon = mission_iku_blood_and_thunder
    position = 11
    required_missions = {
      HVR_approaching_storm
    }
    provinces_to_highlight = {}
    trigger = {
      custom_trigger_tooltip = {
        tooltip = hvr_won_iku_battles_tooltip
        check_variable = {
          which = hvr_won_iku_battles_counter
          value = 20
        }
      }
      army_professionalism = 0.5
      num_of_marines = 25
    }
    effect = {
      custom_tooltip = hvr_iku_as_advisor_reward_tooltip
      add_country_modifier = {
        name = hvr_blood_angels
        duration = -1
      }
      hidden_effect = {
        th_enable_touhou_advisor = {
          advisor = th_advisor_iku
        }
        change_variable = {
          which = hvr_iku_level
          value = 1
        }
      }
    }
  }
  HVR_ride_the_lightning = {
    icon = mission_iku_ride_the_lightning
    position = 12
    required_missions = {
      HVR_blood_and_thunder
    }
    provinces_to_highlight = {}
    trigger = {
      custom_trigger_tooltip = {
        tooltip = hvr_less_light_ships_than_us_ct
        NOT = {
          any_known_country = {
            num_of_light_ship = ROOT
          }
        }
      }
      OR = {
        navy_tradition = 90
        full_idea_group = maritime_ideas
        full_idea_group = naval_ideas
      }
      army_professionalism = 0.9
    }
    effect = {
      custom_tooltip = hvr_iku_stats_improved_again_reward_tooltip
      hidden_effect = {
        change_variable = {
          which = hvr_iku_level
          value = 1
        }
      }
      add_country_modifier = {
        name = hvr_ride_the_lightning
        duration = -1
      }
    }
  }
  HVR_gods_and_humans = {
    icon = mission_parthenon
    position = 13
    required_missions = {}
    provinces_to_highlight = {}
    trigger = {
      AND = {
        num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
          continent = europe
          value = 8
        }
        has_reform = Gensokyan_hvr_absolute_dictatorship
      }
    }
    effect = {
      custom_tooltip = hvr_gods_and_humans_tooltip_reward
      hidden_effect = {
        add_country_modifier = {
          name = hvr_ignore_coring_distance
          duration = -1
        }
        karelia_area = {
          limit = {
            NOT = {
              is_core = ROOT
            }
            NOT = {
              is_permanent_claim = ROOT
            }
          }
          add_permanent_claim = ROOT
        }
        north_karelia = {
          limit = {
            NOT = {
              is_core = ROOT
            }
            NOT = {
              is_permanent_claim = ROOT
            }
          }
          add_permanent_claim = ROOT
        }
        novgorod_area = {
          limit = {
            NOT = {
              is_core = ROOT
            }
            NOT = {
              is_permanent_claim = ROOT
            }
          }
          add_permanent_claim = ROOT
        }
        norrland_area = {
          limit = {
            NOT = {
              is_core = ROOT
            }
            NOT = {
              is_permanent_claim = ROOT
            }
          }
          add_permanent_claim = ROOT
        }
        ostra_svealand_area = {
          limit = {
            NOT = {
              is_core = ROOT
            }
            NOT = {
              is_permanent_claim = ROOT
            }
          }
          add_permanent_claim = ROOT
        }
        svealand_area = {
          limit = {
            NOT = {
              is_core = ROOT
            }
            NOT = {
              is_permanent_claim = ROOT
            }
          }
          add_permanent_claim = ROOT
        }
        northern_greece_area = {
          limit = {
            NOT = {
              is_core = ROOT
            }
            NOT = {
              is_permanent_claim = ROOT
            }
          }
          add_permanent_claim = ROOT
        }
        morea_area = {
          limit = {
            NOT = {
              is_core = ROOT
            }
            NOT = {
              is_permanent_claim = ROOT
            }
          }
          add_permanent_claim = ROOT
        }
        macedonia_area = {
          limit = {
            NOT = {
              is_core = ROOT
            }
            NOT = {
              is_permanent_claim = ROOT
            }
          }
          add_permanent_claim = ROOT
        }
        thrace_area = {
          limit = {
            NOT = {
              is_core = ROOT
            }
            NOT = {
              is_permanent_claim = ROOT
            }
          }
          add_permanent_claim = ROOT
        }
      }
    }
  }
  HVR_thunder_of_perun = {
    icon = mission_perun
    position = 14
    required_missions = {
      HVR_gods_and_humans
    }
    provinces_to_highlight = {
      OR = {
        area = karelia_area
        area = north_karelia
        area = novgorod_area
      }
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    trigger = {
      if = {
        limit = {
          NOT = {
            exists = NOV
          }
          exists = RUS
          RUS = {
            karelia_area = {
              type = all
              owned_by = RUS
            }
            north_karelia = {
              type = all
              owned_by = RUS
            }
            novgorod_area = {
              type = all
              owned_by = RUS
            }
          }
        }
        is_in_war = {
          attacker_leader = ROOT
          defender_leader = RUS
          war_score = 80
        }
      }
      else = {
        NOT = {
          exists = NOV
        }
        karelia_area = {
          type = all
          owned_by = ROOT
        }
        north_karelia = {
          type = all
          owned_by = ROOT
        }
        novgorod_area = {
          type = all
          owned_by = ROOT
        }
      }
    }
    effect = {
      country_event = {
        id = flavor_hvr.19
      }
    }
  }
  HVR_stairway_to_heaven = {
    icon = mission_stairway_to_heaven
    position = 15
    required_missions = {
      HVR_thunder_of_perun
      HVR_wrath_of_zeus
      HVR_glory_of_odin
    }
    provinces_to_highlight = {}
    trigger = {
      236 = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    effect = {
      custom_tooltip = hvr_stairway_to_heaven_ct
      hidden_effect = {
        set_country_flag = hvr_stairway_to_heaven_flag
        swap_non_generic_missions = yes
        5032 = {
          set_province_flag = hvr_stairway_to_heaven_unlocked
        }
        118 = {
          add_permanent_claim = ROOT
        }
      }
      add_country_modifier = {
        name = hvr_stairway_to_heaven_modifier
        duration = -1
      }
    }
  }
}
hvr_slot4_branch = {
  slot = 4
  generic = no
  ai = yes
  has_country_shield = yes
  potential = {
    tag = HVR
  }
  HVR_deal_with_clergy = {
    icon = mission_touhou_hkr_estate
    position = 2
    required_missions = {
      HVR_return_of_tenshi
    }
    provinces_to_highlight = {
      culture = "Heavenish"
      5032 = {
        NOT = {
          has_tax_building_trigger = yes
        }
      }
      OR = {
        NOT = {
          owned_by = ROOT
        }
        NOT = {
          has_tax_building_trigger = yes
        }
      }
    }
    trigger = {
      5032 = {
        has_tax_building_trigger = yes
      }
      num_of_owned_provinces_with = {
        value = 3
        has_tax_building_trigger = yes
      }
    }
    effect = {
      custom_tooltip = hvr_small_deal_with_clergy_tooltip
      hidden_effect = {
        add_country_modifier = {
          name = hvr_disloyal_clergy_level_2
          duration = -1
        }
        remove_country_modifier = hvr_disloyal_clergy
      }
      5032 = {
        add_building = cathedral
      }
      add_permanent_claim_province = {
        province = 5025
      }
    }
  }
  HVR_audence_with_miko = {
    icon = mission_audience_with_miko
    position = 3
    required_missions = {
      HVR_deal_with_clergy
    }
    provinces_to_highlight = {
      province_id = 5025
      NOT = {
        owned_by = ROOT
      }
    }
    trigger = {
      OR = {
        AND = {
          SNK = {
            has_opinion = {
              who = ROOT
              value = 100
            }
          }
          5025 = {
            owned_by = SNK
          }
        }
        5025 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
      }
    }
    effect = {
      if = {
        limit = {
          exists = MYO
          SNK = {
            has_opinion = {
              who = ROOT
              value = 100
            }
          }
        }
        add_casus_belli = {
          type = cb_touhou_religious_pledge_war
          target = MYO
          months = 600
        }
        add_dip_power = 150
        add_country_modifier = {
          name = hvr_harmony_modifier
          duration = 7300
        }
      }
      else_if = {
        limit = {
          exists = MYO
        }
        add_casus_belli = {
          type = cb_touhou_religious_pledge_war
          target = MYO
          months = 600
        }
        add_country_modifier = {
          name = hvr_harmony_modifier
          duration = 7300
        }
      }
      else = {
        Myouren_state = {
          limit = {
            NOT = {
              is_core = ROOT
            }
            NOT = {
              is_permanent_claim = ROOT
            }
          }
          add_permanent_claim = ROOT
        }
        Northern_myouren_state = {
          limit = {
            NOT = {
              is_core = ROOT
            }
            NOT = {
              is_permanent_claim = ROOT
            }
          }
          add_permanent_claim = ROOT
        }
      }
    }
  }
  HVR_doing_a_favor_for_miko = {
    icon = mission_miko_favor
    position = 4
    required_missions = {
      HVR_audence_with_miko
    }
    provinces_to_highlight = {
      province_id = 4987
      NOT = {
        religion = ROOT
      }
    }
    trigger = {
      OR = {
        MYO = {
          religion = ROOT
        }
        4987 = {
          country_or_non_sovereign_subject_holds = ROOT
          religion = ROOT
        }
      }
    }
    effect = {
      country_event = {
        id = flavor_hvr.21
      }
    }
  }
  HVR_spread_the_faith = {
    icon = mission_touhou_th_more_shrines
    position = 6
    required_missions = {
      HVR_doing_a_favor_for_miko
    }
    provinces_to_highlight = {
      OR = {
        superregion = gensokyo_superregion
        superregion = gensokyo_orbit_superregion
      }
      NOT = {
        religion = ROOT
      }
    }
    trigger = {
      calc_true_if = {
        all_province = {
          continent = gensokyo_continent
          religion = ROOT
          owned_by = ROOT
        }
        amount = 35
      }
    }
    effect = {
      add_stability_or_adm_power_per_stab = {
        amount = 3
      }
      add_prestige = 25
    }
  }
  HVR_regained_trust_of_clergy = {
    icon = mission_touhou_shrines
    position = 7
    required_missions = {
      HVR_spread_the_faith
    }
    provinces_to_highlight = {}
    trigger = {
      estate_loyalty = {
        estate = estate_church
        loyalty = 50
      }
      num_of_estate_agendas_completed = {
        estate = estate_church
        value = 4
      }
    }
    effect = {
      custom_tooltip = HVR_loyal_clergy_tooltip
      th_increase_ruler_dip_stat = {
        dip = 1
      }
      remove_country_modifier = hvr_disloyal_clergy_level_2
      hidden_effect = {
        set_country_flag = hvr_loyal_clergy
      }
    }
  }
  HVR_visit_old_hag = {
    icon = mission_touhou_ominous_yukari
    position = 9
    required_missions = {}
    provinces_to_highlight = {
      area = Mayohiga_state
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    trigger = {
      OR = {
        MHG = {
          has_been_insulted_by_root = yes
        }
        NOT = {
          exists = MHG
        }
      }
    }
    effect = {
      if = {
        limit = {
          exists = MHG
        }
        add_casus_belli = {
          type = cb_th_great_insult
          target = MHG
          months = 600
        }
      }
      else = {
        Mayohiga_state = {
          limit = {
            NOT = {
              is_core = ROOT
            }
            NOT = {
              is_permanent_claim = ROOT
            }
          }
          add_permanent_claim = ROOT
        }
      }
    }
  }
  HVR_show_old_hag_her_place = {
    icon = mission_touhou_sleeping_yukari
    position = 10
    required_missions = {
      HVR_visit_old_hag
    }
    provinces_to_highlight = {
      area = Mayohiga_state
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    trigger = {
      custom_trigger_tooltip = {
        tooltip = hvr_tenshi_on_throne_tt
        has_ruler_flag = th_original_tenshi
      }
      if = {
        limit = {
          exists = MHG
        }
        is_in_war = {
          attacker_leader = ROOT
          defender_leader = MHG
          war_score = 80
        }
      }
      else = {
        Mayohiga_state = {
          type = all
          owned_by = ROOT
        }
      }
    }
    effect = {
      custom_tooltip = hvr_duel_with_yukari_help_ct
      if = {
        limit = {
          exists = MHG
        }
        country_event = {
          id = flavor_hvr.45
        }
      }
      else = {
        hidden_effect = {
          set_country_flag = hvr_yukari_beaten_up
        }
        add_country_modifier = {
          name = hvr_beaten_old_hag
          duration = 7300
        }
      }
    }
  }
  HVR_stormbringer = {
    icon = mission_stormbringer
    position = 11
    required_missions = {
      HVR_approaching_storm
    }
    provinces_to_highlight = {}
    trigger = {
      custom_trigger_tooltip = {
        tooltip = hvr_discover_low_countries
        low_countries_region = {
          has_discovered = ROOT
        }
      }
      97 = {
        owner = {
          has_opinion = {
            who = ROOT
            value = 75
          }
        }
      }
      navy_tradition = 60
    }
    effect = {
      add_country_modifier = {
        name = hvr_stormbringer_modifier
        duration = -1
      }
    }
  }
  HVR_way_to_use_keystones = {
    icon = mission_keystones
    position = 12
    required_missions = {
      HVR_blood_and_thunder
      HVR_stormbringer
    }
    provinces_to_highlight = {}
    trigger = {
      num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
        has_shipyard_building_trigger = yes
        value = 20
      }
      has_leader_with = {
        admiral = yes
        manuever = 5
      }
      has_leader_with = {
        general = yes
        manuever = 5
      }
    }
    effect = {
      add_country_modifier = {
        name = hvr_keystones_modifier
        duration = -1
      }
      add_country_modifier = {
        name = hvr_keystones_for_marines_modifier
        duration = -1
      }
    }
  }
  HVR_glory_of_odin = {
    icon = mission_odin
    position = 14
    required_missions = {
      HVR_gods_and_humans
    }
    provinces_to_highlight = {
      OR = {
        area = norrland_area
        area = ostra_svealand_area
        area = svealand_area
      }
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    trigger = {
      if = {
        limit = {
          NOT = {
            exists = SMI
          }
          exists = SWE
          SWE = {
            norrland_area = {
              type = all
              owned_by = SWE
            }
            ostra_svealand_area = {
              type = all
              owned_by = SWE
            }
            svealand_area = {
              type = all
              owned_by = SWE
            }
          }
        }
        is_in_war = {
          attacker_leader = ROOT
          defender_leader = SWE
          war_score = 80
        }
      }
      else_if = {
        limit = {
          NOT = {
            exists = SMI
          }
          exists = SCA
          SCA = {
            norrland_area = {
              type = all
              owned_by = SCA
            }
            ostra_svealand_area = {
              type = all
              owned_by = SCA
            }
            svealand_area = {
              type = all
              owned_by = SCA
            }
          }
        }
        is_in_war = {
          attacker_leader = ROOT
          defender_leader = SCA
          war_score = 80
        }
      }
      else = {
        NOT = {
          exists = SMI
        }
        norrland_area = {
          type = all
          owned_by = ROOT
        }
        ostra_svealand_area = {
          type = all
          owned_by = ROOT
        }
        svealand_area = {
          owned_by = ROOT
        }
      }
    }
    effect = {
      country_event = {
        id = flavor_hvr.23
      }
    }
  }
}
hvr_slot5_branch = {
  slot = 5
  generic = no
  ai = yes
  has_country_shield = yes
  potential = {
    tag = HVR
  }
  HVR_begin_exploration = {
    icon = mission_rb_a_mighty_fleet
    position = 1
    required_missions = {}
    provinces_to_highlight = {}
    trigger = {
      custom_trigger_tooltip = {
        tooltip = hvr_tenshi_on_throne_tt
        has_ruler_flag = th_original_tenshi
      }
      navy_size_percentage = 1
      treasury = 50
    }
    effect = {
      th_enable_exploration_without_explo_ideas = yes
      add_country_modifier = {
        name = hvr_begin_exploration_modifier
        duration = 10950
      }
      add_navy_tradition = 20
      add_treasury = -50
      define_explorer = {
        shock = 2
        fire = 2
        manuever = 5
        siege = 0
        name = "YGYv)YN"  # Curious Celestial
        female = yes
      }
    }
  }
  HVR_land_of_opportunity = {
    icon = mission_establish_high_seas_navy
    position = 2
    required_missions = {
      HVR_begin_exploration
    }
    provinces_to_highlight = {}
    trigger = {
      custom_trigger_tooltip = {
        tooltip = hvr_discover_cascadia
        cascadia_region = {
          has_discovered = ROOT
        }
      }
    }
    effect = {
      country_event = {
        id = flavor_hvr.24
      }
    }
  }
  HVR_first_colony = {
    icon = mission_rb_colonise_canada
    position = 3
    required_missions = {
      HVR_land_of_opportunity
    }
    provinces_to_highlight = {
      colonial_region = colonial_alaska
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
      has_discovered = ROOT
    }
    trigger = {
      num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
        value = 5
        colonial_region = colonial_alaska
        is_city = yes
      }
    }
    effect = {
      add_country_modifier = {
        name = hvr_additional_expedition_force
        duration = -1
      }
    }
  }
  HVR_paradise_city = {
    icon = mission_colonial
    position = 4
    required_missions = {
      HVR_first_colony
    }
    provinces_to_highlight = {
      colonial_region = colonial_california
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
      has_discovered = ROOT
    }
    trigger = {
      num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
        value = 10
        colonial_region = colonial_california
        is_city = yes
      }
      4637 = {
        country_or_non_sovereign_subject_holds = ROOT
      }
      2478 = {
        country_or_non_sovereign_subject_holds = ROOT
      }
      871 = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    effect = {
      country_event = {
        id = flavor_hvr.25
      }
      add_country_modifier = {
        name = hvr_continue_colonisation_effort
        duration = 9125
      }
    }
  }
  HVR_heavenly_states_of_america = {
    icon = mission_ruler_of_north_america
    position = 5
    required_missions = {
      HVR_paradise_city
    }
    provinces_to_highlight = {
      OR = {
        superregion = north_america_superregion
        superregion = central_america_superregion
      }
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
      has_discovered = ROOT
    }
    trigger = {
      num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
        value = 75
        OR = {
          superregion = north_america_superregion
          superregion = central_america_superregion
        }
        is_city = yes
      }
    }
    effect = {
      country_event = {
        id = flavor_hvr.27
      }
    }
  }
  HVR_route_66 = {
    icon = mission_touhou_tenshi_on_route_66
    position = 6
    required_missions = {
      HVR_heavenly_states_of_america
    }
    provinces_to_highlight = {
      OR = {
        province_id = 868
        province_id = 4635
        province_id = 867
        province_id = 876
        province_id = 4634
        province_id = 2494
        province_id = 2495
        province_id = 4631
        province_id = 2496
        province_id = 889
        province_id = 890
        province_id = 898
        province_id = 902
        province_id = 4906
        province_id = 917
        province_id = 916
        province_id = 4903
        province_id = 2519
        province_id = 915
        province_id = 869
        province_id = 4637
        province_id = 2491
        province_id = 2493
        province_id = 4632
        province_id = 880
        province_id = 2476
        province_id = 877
        province_id = 4633
        province_id = 879
        province_id = 2492
        province_id = 881
        province_id = 4630
        province_id = 885
        province_id = 891
        province_id = 4914
        province_id = 2509
        province_id = 900
        province_id = 4904
        province_id = 899
        province_id = 2515
        province_id = 4923
        province_id = 897
        province_id = 4886
        province_id = 894
        province_id = 895
        province_id = 2528
        province_id = 4885
        province_id = 2529
        province_id = 4884
        province_id = 2014
        province_id = 921
        province_id = 893
      }
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
      has_discovered = ROOT
    }
    trigger = {
      custom_trigger_tooltip = {
        tooltip = hvr_own_route_66_tooltip
        868 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        4635 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        867 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        876 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        4634 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        2494 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        2495 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        4631 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        2496 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        889 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        890 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        898 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        902 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        4906 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        917 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        916 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        4903 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        2519 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        915 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        869 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        4637 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        2491 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        2493 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        4632 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        880 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        2476 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        877 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        4633 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        879 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        2492 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        881 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        4630 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        891 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        4914 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        2509 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        900 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        4904 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        899 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        2515 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        4923 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        897 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        4886 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        894 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        895 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        2528 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        4885 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        2529 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        4884 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        2014 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        921 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
        893 = {
          country_or_non_sovereign_subject_holds = ROOT
        }
      }
      treasury = 5000
    }
    effect = {
      country_event = {
        id = flavor_hvr.29
      }
    }
  }
  HVR_invade_the_old_world = {
    icon = mission_european_politics
    position = 7
    required_missions = {
      HVR_route_66
    }
    provinces_to_highlight = {
      OR = {
        province_id = 2664
        province_id = 835
        province_id = 4595
        province_id = 2819
      }
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
      has_discovered = ROOT
    }
    trigger = {
      2664 = {
        country_or_non_sovereign_subject_holds = ROOT
      }
      835 = {
        country_or_non_sovereign_subject_holds = ROOT
      }
      4595 = {
        country_or_non_sovereign_subject_holds = ROOT
      }
      2819 = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    effect = {
      country_event = {
        id = flavor_hvr.52
      }
      british_isles_region = {
        limit = {
          NOT = {
            is_core = HVR
          }
          NOT = {
            is_permanent_claim = HVR
          }
        }
        add_permanent_claim = HVR
      }
    }
  }
  HVR_destroy_royal_navy = {
    icon = mission_rule_britannia
    position = 8
    required_missions = {
      HVR_invade_the_old_world
    }
    provinces_to_highlight = {
      region = british_isles_region
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
      has_discovered = ROOT
    }
    trigger = {
      british_isles_region = {
        country_or_non_sovereign_subject_holds = ROOT
        type = all
      }
    }
    effect = {
      add_country_modifier = {
        name = hvr_stolen_man_of_war
        duration = -1
      }
    }
  }
  HVR_expel_oni = {
    icon = mission_touhou_onigashima
    position = 9
    required_missions = {}
    provinces_to_highlight = {}
    trigger = {
      prestige = 50
      adm_power = 100
      mil_power = 100
    }
    effect = {
      country_event = {
        id = flavor_hvr.31
      }
    }
  }
  HVR_dont_fear_the_reaper = {
    icon = mission_touhou_evil_komachi
    position = 10
    required_missions = {
      HVR_expel_oni
    }
    provinces_to_highlight = {}
    trigger = {
      OR = {
        custom_trigger_tooltip = {
          tooltip = hvr_visited_by_shinigami_tooltip
          has_country_flag = hvr_visited_by_shinigami
        }
        is_year = 1520
      }
    }
    effect = {
      country_event = {
        id = flavor_hvr.33
      }
    }
  }
  HVR_deal_with_shinigami = {
    icon = mission_touhou_empress_eiki
    position = 11
    required_missions = {
      HVR_dont_fear_the_reaper
    }
    provinces_to_highlight = {
      province_id = 4983
      NOT = {
        controlled_by = ROOT
      }
    }
    trigger = {
      OR = {
        AND = {
          treasury = 1000
          HIG = {
            has_opinion = {
              who = ROOT
              value = 75
            }
          }
        }
        AND = {
          custom_trigger_tooltip = {
            tooltip = hvr_tenshi_on_throne_tt
            has_ruler_flag = th_original_tenshi
          }
          HIG = {
            4983 = {
              controlled_by = ROOT
            }
          }
          is_in_war = {
            attacker_leader = ROOT
            defender_leader = HIG
            war_score = 30
          }
        }
        NOT = {
          exists = HIG
        }
      }
    }
    effect = {
      custom_tooltip = hvr_deal_with_shinigami_tt_reward
      hidden_effect = {
        if = {
          limit = {
            treasury = 1000
            HIG = {
              has_opinion = {
                who = ROOT
                value = 75
              }
            }
          }
          country_event = {
            id = flavor_hvr.34
          }
        }
        else_if = {
          limit = {
            is_in_war = {
              attacker_leader = ROOT
              defender_leader = HIG
              war_score = 30
            }
          }
          country_event = {
            id = flavor_hvr.48
          }
        }
        else = {
          country_event = {
            id = flavor_hvr.36
          }
        }
      }
    }
  }
}
hvr_stairway_to_heaven_branch = {
  slot = 3
  generic = no
  ai = yes
  potential = {
    has_country_flag = hvr_stairway_to_heaven_flag
    th_is_or_was_tag = {
      tag = HVR
    }
  }
  has_country_shield = yes
  HVR_judgement_day = {
    icon = mission_tenshi_judgement_day
    position = 16
    required_missions = {
      HVR_stairway_to_heaven
    }
    provinces_to_highlight = {
      OR = {
        superregion = europe_superregion
        superregion = eastern_europe_superregion
        province_id = 118
      }
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    trigger = {
      num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
        value = 100
        OR = {
          superregion = europe_superregion
          superregion = eastern_europe_superregion
        }
        is_city = yes
      }
      118 = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    effect = {
      country_event = {
        id = flavor_hvr.20
      }
    }
  }
  HVR_angel_of_apocalypse = {
    icon = mission_angel_of_apocalypse
    position = 17
    required_missions = {
      HVR_judgement_day
    }
    provinces_to_highlight = {
      OR = {
        superregion = europe_superregion
        superregion = eastern_europe_superregion
        province_id = 118
      }
      NOT = {
        country_or_non_sovereign_subject_holds = ROOT
      }
    }
    trigger = {
      is_hegemon = yes
      OR = {
        calc_true_if = {
          all_country = {
            religion = ROOT
          }
          amount = 50
        }
        calc_true_if = {
          all_province = {
            religion = ROOT
          }
          amount = 500
        }
      }
    }
    effect = {
      custom_tooltip = HVR_angel_of_apocalypse_ct
      hidden_effect = {
        set_country_flag = hvr_angel_of_apocalypse
      }
    }
  }
}