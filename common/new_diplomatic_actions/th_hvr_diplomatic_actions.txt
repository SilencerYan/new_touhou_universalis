th_hvr_weather_control_devastating_earthquake = {   ### Devastating earthquake
	category = th_diplo_action

	require_acceptance = no

	is_visible = {
		OR = {
			th_has_copied_from_target = {
				target = HVR
			}
			has_government_attribute = th_weather_control_mechanic
		}
	}

	is_allowed = {
		mil_power = 150
		custom_trigger_tooltip = {
			tooltip = hvr_has_been_used_earthquake_for_15_years
			FROM = {				
				OR = {
					NOT = { has_country_flag = hvr_used_earthquake_on_target }
					had_country_flag = {
						flag = hvr_used_earthquake_on_target
						days = 5475		#15 years
					}
				}
			}
		}
		custom_trigger_tooltip = {
			tooltip = hvr_only_on_war_enemies
			FROM = {
				war_with = ROOT
			}
		}
	}

	on_accept = {
		th_tenshi_temper_gain_effect = { value = 3 }
		change_variable = {
			which = hvr_earthquake_counter
			value = 1
		}
		FROM = {
			country_event = {  
				id = flavor_hvr.104
			}
			add_trust = {
				who = ROOT
				value = -5
			}
			add_opinion = {
				modifier = th_hvr_used_hvr_devastating_earthquake
				who = ROOT
			}
		}
		add_mil_power = -150
	}
	ai_will_do = {
		always = no
	}
}

th_hvr_weather_control_heavy_rain = {   ### No harvest for you!
	category = th_diplo_action

	require_acceptance = no

	is_visible = {
		OR = {
			th_has_copied_from_target = {
				target = HVR
			}
			has_government_attribute = th_weather_control_mechanic
		}
		has_country_flag = hvr_unlocked_heavy_rain
	}

	is_allowed = {
		custom_trigger_tooltip = {
			tooltip = hvr_has_20_power
			check_variable = {
				which = hvr_hisou_sword_energy
				value = 20
			}
		}
		if = {
			limit = {
				FROM = { tag = KPP }
			}
			custom_trigger_tooltip = {
				tooltip = hvr_cannot_use_heavy_rain_on_kpp
				FROM = { NOT = { tag = KPP } }
			}
		}
	}

	on_accept = {
		th_tenshi_temper_gain_effect = { value = 3 }
		change_variable = {
			which = hvr_weather_action_counter
			value = 1
		}
		change_variable = {
			which = hvr_hisou_sword_energy
			value = -20
		}
		FROM = {
			country_event = {  
				id = flavor_hvr.103
			}
			add_trust = {
				who = ROOT
				value = -3
			}
			add_opinion = {
				modifier = th_hvr_used_weather_control_on_us
				who = ROOT
			}
		}
	}
	ai_will_do = {
		always = no
	}
}

th_hvr_weather_control_strong_sun = {
	category = th_diplo_action

	require_acceptance = no

	is_visible = {
		OR = {
			th_has_copied_from_target = {
				target = HVR
			}
			has_government_attribute = th_weather_control_mechanic
		}
		has_country_flag = hvr_unlocked_strong_sun
	}

	is_allowed = {
		custom_trigger_tooltip = {
			tooltip = hvr_has_20_power
			check_variable = {
				which = hvr_hisou_sword_energy
				value = 20
			}
		}	
	}

	on_accept = {
		th_tenshi_temper_gain_effect = { value = 3 }
		change_variable = {
			which = hvr_weather_action_counter
			value = 1
		}
		change_variable = {
			which = hvr_hisou_sword_energy
			value = -20
		}
		FROM = {
			country_event = {  
				id = flavor_hvr.26
			}
			add_trust = {
				who = ROOT
				value = -3
			}
			add_opinion = {
				modifier = th_hvr_used_weather_control_on_us
				who = ROOT
			}
		}
	}
	ai_will_do = {
		always = no
	}
}

th_hvr_weather_control_blizzard = {
	category = th_diplo_action

	require_acceptance = no

	is_visible = {
		OR = {
			th_has_copied_from_target = {
				target = HVR
			}
			has_government_attribute = th_weather_control_mechanic
		}
		has_country_flag = hvr_unlocked_blizzard
	}

	is_allowed = {
		custom_trigger_tooltip = {
			tooltip = hvr_has_20_power
			check_variable = {
				which = hvr_hisou_sword_energy
				value = 20
			}
		}
		if = {
			limit = {
				FROM = { tag = CIN }
			}
			custom_trigger_tooltip = {
				tooltip = hvr_bakas_do_not_get_cold
				FROM = { NOT = { tag = CIN } }
			}
		}
	}

	on_accept = {
		th_tenshi_temper_gain_effect = { value = 3 }
		change_variable = {
			which = hvr_weather_action_counter
			value = 1
		}
		change_variable = {
			which = hvr_hisou_sword_energy
			value = -20
		}
		FROM = {
			country_event = {  
				id = flavor_hvr.27
			}
			add_trust = {
				who = ROOT
				value = -3
			}
			add_opinion = {
				modifier = th_hvr_used_weather_control_on_us
				who = ROOT
			}
		}
	}
	ai_will_do = {
		always = no
	}
}

th_hvr_weather_control_heavy_fog = {
	category = th_diplo_action

	require_acceptance = no

	is_visible = {
		OR = {
			th_has_copied_from_target = {
				target = HVR
			}
			has_government_attribute = th_weather_control_mechanic
		}
		has_country_flag = hvr_unlocked_heavy_fog
	}

	is_allowed = {
		custom_trigger_tooltip = {
			tooltip = hvr_has_20_power
			check_variable = {
				which = hvr_hisou_sword_energy
				value = 20
			}
		}
		if = {
			limit = {
				FROM = { 
					OR = {
						th_is_or_was_tag = {
							tag = SCR
						}
						tag = FLR
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = hvr_vampires_like_fog
				FROM = { 
					NOT = { 
						OR = {
							th_is_or_was_tag = {
								tag = SCR
							}
							tag = FLR
						}
					} 
				}
			}
		}
	}

	on_accept = {
		th_tenshi_temper_gain_effect = { value = 3 }
		change_variable = {
			which = hvr_weather_action_counter
			value = 1
		}
		change_variable = {
			which = hvr_hisou_sword_energy
			value = -20
		}
		FROM = {
			country_event = {  
				id = flavor_hvr.28
			}
			add_trust = {
				who = ROOT
				value = -3
			}
			add_opinion = {
				modifier = th_hvr_used_weather_control_on_us
				who = ROOT
			}
		}
	}
	ai_will_do = {
		always = no
	}
}

th_hvr_taunt = {
	category = th_diplo_action

	require_acceptance = no

	is_visible = {
		has_country_flag = hvr_unlock_taunt_flag
	}

	is_allowed = {
		FROM = {
			is_free_or_tributary_trigger = yes
		}
		if = {
			limit = {
				FROM = { alliance_with = ROOT }
			}
			custom_trigger_tooltip = {
				tooltip = TH_FROM_IS_NOT_OUR_ALLY
				FROM = { NOT = { alliance_with = ROOT } }
			}
		}
		if = {
			limit = {
				FROM = {
					OR = {
						has_country_flag = th_immunity_to_diplomatic_actions
						has_government_attribute = enables_yama_authority
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = th_from_is_not_immune_to_diplomatic_actions_tt
				FROM = {
					NOT = { has_country_flag = th_immunity_to_diplomatic_actions }
					NOT = { has_government_attribute = enables_yama_authority }
				}
			}
		}
		if = {
			limit = {
				FROM = {
					th_is_ai_lunarian_before_1550 = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = AI_Lunarian_wont_do_nothing_before_1550_tt
				FROM = {
					NOT = { th_is_ai_lunarian_before_1550 = yes }
				}
			}
		}
		custom_trigger_tooltip = {
			tooltip = hvr_has_used_taunt_for_15_years
			OR = {
				NOT = { has_country_flag = hvr_used_taunt }
				had_country_flag = {
					flag = hvr_used_taunt
					days = 5475		#15 years
				}
			}
		}
	}

	on_accept = {
		FROM = {
			country_event = {  
				id = th_diplo_events.58
			}
		}
	}
	ai_will_do = {
		always = no
	}
}