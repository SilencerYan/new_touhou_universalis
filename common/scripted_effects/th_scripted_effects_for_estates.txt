#Adjust the vanilla effects below if you add a new estate or a new religion (for the clergy revolts)


#scaled_estate_<TOUHOU ESTATE>_land_share_effect = {
#	scaled_estate_land_share_add_effect = { estate = <TOUHOU ESTATE> }
#}

scaled_estate_crow_tengu_land_share_effect = {
	scaled_estate_land_share_add_effect = { estate = estate_crow_tengu }
}
scaled_estate_crow_tengu = {
	scaled_estate_land_share_reduce_effect = { estate = estate_crow_tengu }
}
scaled_estate_fairy_pirates_land_share_effect = {
	scaled_estate_land_share_add_effect = { estate = estate_fairy_pirates }
}
scaled_estate_fairy_pirates = {
	scaled_estate_land_share_reduce_effect = { estate = estate_fairy_pirates }
}
scaled_estate_great_tengu_land_share_effect = {
	scaled_estate_land_share_add_effect = { estate = estate_great_tengu }
}
scaled_estate_great_tengu = {
	scaled_estate_land_share_reduce_effect = { estate = estate_great_tengu }
}
scaled_estate_lunarian_rabbits_land_share_effect = {
	scaled_estate_land_share_add_effect = { estate = estate_lunarian_rabbits }
}
scaled_estate_lunarian_rabbits = {
	scaled_estate_land_share_reduce_effect = { estate = estate_lunarian_rabbits }
}
scaled_estate_rival_kaguya_land_share_effect = {
	scaled_estate_land_share_add_effect = { estate = estate_rival_kaguya }
}
scaled_estate_rival_kaguya = {
	scaled_estate_land_share_reduce_effect = { estate = estate_rival_kaguya }
}
scaled_estate_rival_mokou_land_share_effect = {
	scaled_estate_land_share_add_effect = { estate = estate_rival_mokou }
}
scaled_estate_rival_mokou = {
	scaled_estate_land_share_reduce_effect = { estate = estate_rival_mokou }
}
scaled_estate_wolf_tengu_land_share_effect = {
	scaled_estate_land_share_add_effect = { estate = estate_wolf_tengu }
}
scaled_estate_wolf_tengu = {
	scaled_estate_land_share_reduce_effect = { estate = estate_wolf_tengu }
}
scaled_estate_yama_land_share_effect = {
	scaled_estate_land_share_add_effect = { estate = estate_yama }
}
scaled_estate_yama = {
	scaled_estate_land_share_reduce_effect = { estate = estate_yama }
}

# Expects country scope
th_seize_land_effect = {
	hidden_effect = {
		set_variable = {
			which = seize_land_effect_variable
			value = $scale$
		}
		while = {
			limit = {
				check_variable = {
					which = seize_land_effect_variable
					value = 1
				}
			}
			change_variable = {
				which = seize_land_effect_variable
				value = -1
			}
			if = {
				limit = {
					any_owned_province = {
						OR = {
							is_in_capital_area = yes
							is_state_core = root
						}
						is_capital = no
						NOT = {
							area_for_scope_province = {
								owned_by = root
								has_province_flag = seize_land_spawn_unrest_and_rebels
							}
						}
						area_for_scope_province = {
							any_neighbor_province = {
								owned_by = root
								has_province_flag = seize_land_spawn_unrest_and_rebels
							}
						}
					}
				}
				random_owned_province = {
					limit = {
						OR = {
							is_in_capital_area = yes
							is_state_core = root
						}
						is_capital = no
						NOT = {
							area_for_scope_province = {
								owned_by = root
								has_province_flag = seize_land_spawn_unrest_and_rebels
							}
						}
						area_for_scope_province = {
							any_neighbor_province = {
								owned_by = root
								has_province_flag = seize_land_spawn_unrest_and_rebels
							}
						}
						highest_supply_limit_in_area = yes
					}
					th_spawn_rebels_from_unhappy_estate = { size = 2 }
					area = {
						limit = {
							owned_by = ROOT
						}
						set_province_flag = seize_land_spawn_unrest_and_rebels
						if = {
							limit = {
								NOT = { has_province_flag = has_estate_unrest_flag }
							}
							add_named_unrest = { name = estate_land_seized value = 10 }
							set_province_flag = has_estate_unrest_flag
						}
					}
				}
			}
			else = {
				random_owned_province = {
					limit = {
						OR = {
							is_in_capital_area = yes
							is_state_core = root
						}
						NOT = {
							area_for_scope_province = {
								owned_by = root
								has_province_flag = seize_land_spawn_unrest_and_rebels
							}
						}
						highest_supply_limit_in_area = yes
					}
					th_spawn_rebels_from_unhappy_estate = { size = 2 }
					area = {
						limit = {
							owned_by = ROOT
						}
						set_province_flag = seize_land_spawn_unrest_and_rebels
						if = {
							limit = {
								NOT = { has_province_flag = has_estate_unrest_flag }
							}
							add_named_unrest = { name = estate_land_seized value = 10 }
							set_province_flag = has_estate_unrest_flag
						}
					}
				}
			}
		}
		every_owned_province = {
			limit = { has_province_flag = seize_land_spawn_unrest_and_rebels }
			clr_province_flag = seize_land_spawn_unrest_and_rebels
		}
	}
}

th_spawn_rebels_from_unhappy_estate = {
	if = {
		limit = {
			owner = { 
				NOT = { disabled_rebels_from_seized_land_for_estate = { estate = all } } 
				NOT = { has_government_attribute = seizing_land_no_rebels }
			}
		}
		random_list = {
			1 = {
				trigger = {
					owner = {
						NOT = { disabled_rebels_from_seized_land_for_estate = { estate = estate_nobles } }
						has_estate = estate_nobles
						NOT = {
							estate_loyalty = {
								estate = estate_nobles
								loyalty = 30
							}
						}
					}
				}
				if = {
					limit = {
						owner = {
							OR = {
								primary_culture = polish
								primary_culture = polish_new
							}
						}
					}
					spawn_rebels = {
						type = polish_noble_rebels
						size = $size$
						estate = estate_nobles
						as_if_faction = yes
					}
				}
				else = {
					spawn_rebels = {
						type = noble_rebels
						size = $size$
						estate = estate_nobles
						as_if_faction = yes
					}
				}
			}
			1 = {
				trigger = {
					owner = {
						NOT = { disabled_rebels_from_seized_land_for_estate = { estate = estate_church } }
						has_estate = estate_church
						NOT = {
							estate_loyalty = {
								estate = estate_church
								loyalty = 30
							}
						}
					}
				}
				owner = {
					trigger_switch = {
						on_trigger = religion
						anglican =      		{ PREV = { spawn_rebels = { type = anglican_rebels size = $size$ as_if_faction = yes } } }
						hussite =       		{ PREV = { spawn_rebels = { type = hussite_rebels size = $size$ as_if_faction = yes } } }
						animism =       		{ PREV = { spawn_rebels = { type = animism_rebels size = $size$ as_if_faction = yes } } }
						buddhism =      		{ PREV = { spawn_rebels = { type = buddhism_rebels size = $size$ as_if_faction = yes } } }
						catholic =      		{ PREV = { spawn_rebels = { type = catholic_rebels size = $size$ as_if_faction = yes } } }
						confucianism =  		{ PREV = { spawn_rebels = { type = confucianism_rebels size = $size$ as_if_faction = yes } } }
						coptic =        		{ PREV = { spawn_rebels = { type = coptic_rebels size = $size$ as_if_faction = yes } } }
						hinduism =      		{ PREV = { spawn_rebels = { type = hinduism_rebels size = $size$ as_if_faction = yes } } }
						ibadi =         		{ PREV = { spawn_rebels = { type = ibadi_rebels size = $size$ as_if_faction = yes } } }
						inti =          		{ PREV = { spawn_rebels = { type = inti_rebels size = $size$ as_if_faction = yes } } }
						jewish =        		{ PREV = { spawn_rebels = { type = jewish_rebels size = $size$ as_if_faction = yes } } }
						mahayana =      		{ PREV = { spawn_rebels = { type = mahayana_rebels size = $size$ as_if_faction = yes } } }
						mesoamerican_religion = { PREV = { spawn_rebels = { type = maya_rebels size = $size$ as_if_faction = yes } } }
						nahuatl =       		{ PREV = { spawn_rebels = { type = nahuatl_rebels size = $size$ as_if_faction = yes } } }
						norse_pagan_reformed = 	{ PREV = { spawn_rebels = { type = norse_pagan_reformed_rebels size = $size$ as_if_faction = yes } } }
						orthodox =      		{ PREV = { spawn_rebels = { type = orthodox_rebels size = $size$ as_if_faction = yes } } }
						protestant =    		{ PREV = { spawn_rebels = { type = protestant_rebels size = $size$ as_if_faction = yes } } }
						reformed =      		{ PREV = { spawn_rebels = { type = reformed_rebels size = $size$ as_if_faction = yes } } }
						shamanism =     		{ PREV = { spawn_rebels = { type = shamanism_rebels size = $size$ as_if_faction = yes } } }
						shiite =        		{ PREV = { spawn_rebels = { type = shiite_rebels size = $size$ as_if_faction = yes } } }
						shinto =        		{ PREV = { spawn_rebels = { type = shinto_rebels size = $size$ as_if_faction = yes } } }
						sikhism =       		{ PREV = { spawn_rebels = { type = sikhism_rebels size = $size$ as_if_faction = yes } } }
						sunni =         		{ PREV = { spawn_rebels = { type = sunni_rebels size = $size$ as_if_faction = yes } } }
						tengri_pagan_reformed = { PREV = { spawn_rebels = { type = tengri_pagan_reformed_rebels size = $size$ as_if_faction = yes } } }
						totemism =      		{ PREV = { spawn_rebels = { type = totemism_rebels size = $size$ as_if_faction = yes } } }
						vajrayana =     		{ PREV = { spawn_rebels = { type = vajrayana_rebels size = $size$ as_if_faction = yes } } }
						zoroastrian =   		{ PREV = { spawn_rebels = { type = zoroastrian_rebels size = $size$ as_if_faction = yes } } }
						dreamtime =      		{ PREV = { spawn_rebels = { type = dreamtime_rebels size = $size$ as_if_faction = yes } } }
						#TOUHOU					
						th_hakureishinto =   	{ PREV = { spawn_rebels = { type = th_hakureishinto_rebels size = $size$ as_if_faction = yes } } }
						th_moriyashinto =   	{ PREV = { spawn_rebels = { type = th_moriya_rebels size = $size$ as_if_faction = yes } } }
						th_buddhist =   		{ PREV = { spawn_rebels = { type = th_buddhist_rebels size = $size$ as_if_faction = yes } } }
						th_taoist =   			{ PREV = { spawn_rebels = { type = th_taoist_rebels size = $size$ as_if_faction = yes } } }
						th_oldhakurei =   		{ PREV = { spawn_rebels = { type = th_old_hakurei_rebels size = $size$ as_if_faction = yes } } }
						th_shinkism =   		{ PREV = { spawn_rebels = { type = th_shinkistic_rebels size = $size$ as_if_faction = yes } } }
						th_scientistic =   		{ PREV = { spawn_rebels = { type = th_scientistic_rebels size = $size$ as_if_faction = yes } } }
						th_occultism =	 		{ PREV = { spawn_rebels = { type = th_occultism_rebels size = $size$ as_if_faction = yes } } }
						th_lunarian_religion =  { PREV = { spawn_rebels = { type = th_rel_lunarian_rebels size = $size$ as_if_faction = yes } } }
						th_gensokirishitan =  	{ PREV = { spawn_rebels = { type = th_gensokirishitan_rebels size = $size$ as_if_faction = yes } } }
						th_scarlet_christians =	{ PREV = { spawn_rebels = { type = th_scarlet_christians_rebels size = $size$ as_if_faction = yes } } }
						#Make sure to add other religions here too 
					}
				}
			}
			1 = {
				trigger = {
					owner = {
						NOT = { disabled_rebels_from_seized_land_for_estate = { estate = estate_rajput } }
						has_estate = estate_rajput
						NOT = {
							estate_loyalty = {
								estate = estate_rajput
								loyalty = 30
							}
						}
					}
				}
				spawn_rebels = {
					type = noble_rebels
					size = $size$
					estate = estate_rajput
					as_if_faction = yes
				}
			}
			1 = {
				trigger = {
					owner = {
						NOT = { disabled_rebels_from_seized_land_for_estate = { estate = estate_maratha } }
						has_estate = estate_maratha
						NOT = {
							estate_loyalty = {
								estate = estate_maratha
								loyalty = 30
							}
						}
					}
				}
				spawn_rebels = {
					type = noble_rebels
					size = $size$
					estate = estate_maratha
					as_if_faction = yes
				}
			}
			1 = {
				trigger = {
					owner = {
						NOT = { disabled_rebels_from_seized_land_for_estate = { estate = estate_burghers } }
						has_estate = estate_burghers
						NOT = {
							estate_loyalty = {
								estate = estate_burghers
								loyalty = 30
							}
						}
					}
				}
				spawn_rebels = {
					type = particularist_rebels
					size = $size$
					estate = estate_burghers
					as_if_faction = yes
				}
			}
			1 = {
				trigger = {
					owner = {
						NOT = { disabled_rebels_from_seized_land_for_estate = { estate = estate_jains } }
						has_estate = estate_jains
						NOT = {
							estate_loyalty = {
								estate = estate_jains
								loyalty = 30
							}
						}
					}
				}
				spawn_rebels = {
					type = particularist_rebels
					size = $size$
					estate = estate_jains
					as_if_faction = yes
				}
			}
			1 = {
				trigger = {
					owner = {
						NOT = { disabled_rebels_from_seized_land_for_estate = { estate = estate_vaisyas } }
						has_estate = estate_vaisyas
						NOT = {
							estate_loyalty = {
								estate = estate_vaisyas
								loyalty = 30
							}
						}
					}
				}
				spawn_rebels = {
					type = particularist_rebels
					size = $size$
					estate = estate_vaisyas
					as_if_faction = yes
				}
			}
			1 = {
				trigger = {
					owner = {
						NOT = { disabled_rebels_from_seized_land_for_estate = { estate = estate_dhimmi } }
						has_estate = estate_dhimmi
						NOT = {
							estate_loyalty = {
								estate = estate_dhimmi
								loyalty = 30
							}
						}
					}
				}
				spawn_rebels = {
					type = particularist_rebels
					size = $size$
					estate = estate_dhimmi
					as_if_faction = yes
				}
			}
			1 = {
				trigger = {
					owner = {
						NOT = { disabled_rebels_from_seized_land_for_estate = { estate = estate_brahmins } }
						has_estate = estate_brahmins
						NOT = {
							estate_loyalty = {
								estate = estate_brahmins
								loyalty = 30
							}
						}
					}
				}
				spawn_rebels = {
					type = hinduism_rebels
					size = $size$
					estate = estate_brahmins
					as_if_faction = yes
				}
			}
			1 = {
				trigger = {
					owner = {
						NOT = { disabled_rebels_from_seized_land_for_estate = { estate = estate_cossacks } }
						has_estate = estate_cossacks
						NOT = {
							estate_loyalty = {
								estate = estate_cossacks
								loyalty = 30
							}
						}
					}
				}
				spawn_rebels = {
					type = cossack_rebels
					size = $size$
					estate = estate_cossacks
					as_if_faction = yes
				}
			}
			1 = {
				trigger = {
					owner = {
						NOT = { disabled_rebels_from_seized_land_for_estate = { estate = estate_nomadic_tribes } }
						has_estate = estate_nomadic_tribes
						NOT = {
							estate_loyalty = {
								estate = estate_nomadic_tribes
								loyalty = 30
							}
						}
					}
				}
				spawn_rebels = {
					type = tribal_rebels
					size = $size$
					estate = estate_nomadic_tribes
					as_if_faction = yes
				}
			}
			1 = {
				trigger = {
					owner = {
						NOT = { disabled_rebels_from_seized_land_for_estate = { estate = estate_janissaries } }
						has_estate = estate_janissaries
						NOT = {
							estate_loyalty = {
								estate = estate_janissaries
								loyalty = 30
							}
						}
					}
				}
				spawn_rebels = {
					type = janissary_rebels
					size = $size$
					estate = estate_janissaries
					as_if_faction = yes
				}
			}
			1 = {
				trigger = {
					owner = {
						NOT = { disabled_rebels_from_seized_land_for_estate = { estate = estate_eunuchs } }
						has_estate = estate_eunuchs
						NOT = {
							estate_loyalty = {
								estate = estate_eunuchs
								loyalty = 30
							}
						}
					}
				}
				spawn_rebels = {
					type = eunuch_rebels
					size = $size$
					estate = estate_eunuchs
					as_if_faction = yes
				}
			}
			1 = {
				trigger = {
					owner = {
						NOT = { disabled_rebels_from_seized_land_for_estate = { estate = estate_qizilbash } }
						has_estate = estate_qizilbash
						NOT = {
							estate_loyalty = {
								estate = estate_qizilbash
								loyalty = 30
							}
						}
					}
				}
				spawn_rebels = {
					type = qizilbash_rebels
					size = $size$
					estate = estate_qizilbash
					as_if_faction = yes
				}
			}
			1 = {
				trigger = {
					owner = {
						NOT = { disabled_rebels_from_seized_land_for_estate = { estate = estate_ghulams } }
						has_estate = estate_ghulams
						NOT = {
							estate_loyalty = {
								estate = estate_ghulams
								loyalty = 30
							}
						}
					}
				}
				spawn_rebels = {
					type = ghulams_rebels
					size = $size$
					estate = estate_ghulams
					as_if_faction = yes
				}
			}
			1 = {
				trigger = {
					owner = {
						NOT = { disabled_rebels_from_seized_land_for_estate = { estate = estate_great_tengu } }
						has_estate = estate_great_tengu
						NOT = {
							estate_loyalty = {
								estate = estate_great_tengu
								loyalty = 30
							}
						}
					}
				}
				spawn_rebels = {
					type = th_great_tengu_rebels
					size = $size$
					estate = estate_great_tengu
					as_if_faction = yes
				}
			}
			1 = {
				trigger = {
					owner = {
						NOT = { disabled_rebels_from_seized_land_for_estate = { estate = estate_crow_tengu } }
						has_estate = estate_crow_tengu
						NOT = {
							estate_loyalty = {
								estate = estate_crow_tengu
								loyalty = 30
							}
						}
					}
				}
				spawn_rebels = {
					type = th_crow_tengu_rebels
					size = $size$
					estate = estate_crow_tengu
					as_if_faction = yes
				}
			}
			1 = {
				trigger = {
					owner = {
						NOT = { disabled_rebels_from_seized_land_for_estate = { estate = estate_wolf_tengu } }
						has_estate = estate_wolf_tengu
						NOT = {
							estate_loyalty = {
								estate = estate_wolf_tengu
								loyalty = 30
							}
						}
					}
				}
				spawn_rebels = {
					type = th_wolf_tengu_rebels
					size = $size$
					estate = estate_wolf_tengu
					as_if_faction = yes
				}
			}
			1 = {
				trigger = {
					owner = {
						NOT = { disabled_rebels_from_seized_land_for_estate = { estate = estate_lunarian_rabbits } }
						has_estate = estate_lunarian_rabbits
						NOT = {
							estate_loyalty = {
								estate = estate_lunarian_rabbits
								loyalty = 30
							}
						}
					}
				}
				spawn_rebels = {
					type = th_lunarian_rabbits_rebels
					size = $size$
					estate = estate_lunarian_rabbits
					as_if_faction = yes
				}
			}
		}
	}
}

th_pick_random_estate_if_present = {
	random_list = {
		1 = { 
			trigger = {
				has_estate = estate_brahmins
				NOT = { has_country_flag = estate_brahmins_$flag$ }
			}
			set_country_flag = estate_brahmins_$flag$
			[[estate_action]
			$estate_action$ = estate_brahmins
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_church
				NOT = { has_country_flag = estate_church_$flag$ }
			}
			set_country_flag = estate_church_$flag$
			[[estate_action]
			$estate_action$ = estate_church
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_maratha
				NOT = { has_country_flag = estate_maratha_$flag$ }
			}
			set_country_flag = estate_maratha_$flag$ 
			[[estate_action]
			$estate_action$ = estate_maratha
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_nobles
				NOT = { has_country_flag = estate_nobles_$flag$ }
			}
			set_country_flag = estate_nobles_$flag$
			[[estate_action]
			$estate_action$ = estate_nobles
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_burghers
				NOT = { has_country_flag = estate_burghers_$flag$ }
			}
			set_country_flag = estate_burghers_$flag$
			[[estate_action]
			$estate_action$ = estate_burghers
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_vaisyas
				NOT = { has_country_flag = estate_vaisyas_$flag$ }
			}
			set_country_flag = estate_vaisyas_$flag$
			[[estate_action]
			$estate_action$ = estate_vaisyas
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_cossacks
				NOT = { has_country_flag = estate_cossacks_$flag$ }
			}
			set_country_flag = estate_cossacks_$flag$
			[[estate_action]
			$estate_action$ = estate_cossacks
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_nomadic_tribes
				NOT = { has_country_flag = estate_nomadic_tribes_$flag$ }
			}
			set_country_flag = estate_nomadic_tribes_$flag$
			[[estate_action]
			$estate_action$ = estate_nomadic_tribes
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_dhimmi
				NOT = { has_country_flag = estate_dhimmi_$flag$ }
			}
			set_country_flag = estate_dhimmi_$flag$
			[[estate_action]
			$estate_action$ = estate_dhimmi
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_jains
				NOT = { has_country_flag = estate_jains_$flag$ }
			}
			set_country_flag = estate_jains_$flag$
			[[estate_action]
			$estate_action$ = estate_jains
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_rajput
				NOT = { has_country_flag = estate_rajput_$flag$ }
			}
			set_country_flag = estate_rajput_$flag$
			[[estate_action]
			$estate_action$ = estate_rajput
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_janissaries
				NOT = { has_country_flag = estate_janissaries_$flag$ }
			}
			set_country_flag = estate_janissaries_$flag$
			[[estate_action]
			$estate_action$ = estate_janissaries
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_eunuchs
				NOT = { has_country_flag = estate_eunuchs_$flag$ }
			}
			set_country_flag = estate_eunuchs_$flag$
			[[estate_action]
			$estate_action$ = estate_eunuchs
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_qizilbash
				NOT = { has_country_flag = estate_qizilbash_$flag$ }
			}
			set_country_flag = estate_qizilbash_$flag$
			[[estate_action]
			$estate_action$ = estate_qizilbash
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_ghulams
				NOT = { has_country_flag = estate_ghulams_$flag$ }
			}
			set_country_flag = estate_ghulams_$flag$
			[[estate_action]
			$estate_action$ = estate_ghulams
			]
		}
		#Touhou
		1 = { 
			trigger = {
				has_estate = estate_lunarian_rabbits
				NOT = { has_country_flag = estate_lunarian_rabbits_$flag$ }
			}
			set_country_flag = estate_lunarian_rabbits_$flag$
			[[estate_action]
			$estate_action$ = estate_lunarian_rabbits
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_great_tengu
				NOT = { has_country_flag = estate_great_tengu_$flag$ }
			}
			set_country_flag = estate_great_tengu_$flag$
			[[estate_action]
			$estate_action$ = estate_great_tengu
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_crow_tengu
				NOT = { has_country_flag = estate_crow_tengu_$flag$ }
			}
			set_country_flag = estate_crow_tengu_$flag$
			[[estate_action]
			$estate_action$ = estate_crow_tengu
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_wolf_tengu
				NOT = { has_country_flag = estate_wolf_tengu_$flag$ }
			}
			set_country_flag = estate_wolf_tengu_$flag$
			[[estate_action]
			$estate_action$ = estate_wolf_tengu
			]
		}
	}
}

th_seize_land_estate_effect = {
	take_estate_land_share_massive = { estate = $estate$ }
	if = {
		limit = {
			has_government_attribute = seizing_land_loyalty
			has_country_flag = tgu_buffed_crownland_interactions
		}
		add_estate_loyalty = {
			estate = $estate$
			loyalty = -10
			short = yes
		}
	}
	else_if = {
		limit = {
			OR = {
				has_government_attribute = seizing_land_loyalty
				has_country_flag = tgu_buffed_crownland_interactions
			}
		}
		add_estate_loyalty = {
			estate = $estate$
			loyalty = -15
			short = yes
		}
	}
	else = {
		add_estate_loyalty = {
			estate = $estate$
			loyalty = -20
			short = yes
		}
	}
	if = {
		limit = { NOT = { has_government_attribute = seizing_land_no_rebels } }
		custom_tooltip = seize_land_rebels_tt
	}
	if = {
		limit = {
			NOT = {
				estate_loyalty = {
					estate = $estate$
					loyalty = 50
				}
			}
			estate_loyalty = {
				estate = $estate$
				loyalty = 30
			}
		}
	}
	else_if = { 
		limit = {
			NOT = {
				estate_loyalty = {
					estate = $estate$
					loyalty = 30
				}
			}
			estate_influence = {
				estate = $estate$
				influence = 1
			}				
		}
		th_spawn_rebels_seize_land_switch = yes
	}
}

th_spawn_rebels_seize_land_switch = {
	trigger_switch = {
		on_trigger = num_of_owned_areas
		1000 = { custom_tooltip = estate_seize_land_interaction_tooltip_1000 th_seize_land_effect = { scale = 101 } }
		990 = { custom_tooltip = estate_seize_land_interaction_tooltip_990 th_seize_land_effect = { scale = 100 } }
		980 = { custom_tooltip = estate_seize_land_interaction_tooltip_980 th_seize_land_effect = { scale = 99 } }
		970 = { custom_tooltip = estate_seize_land_interaction_tooltip_970 th_seize_land_effect = { scale = 98 } }
		960 = { custom_tooltip = estate_seize_land_interaction_tooltip_960 th_seize_land_effect = { scale = 97 } }
		950 = { custom_tooltip = estate_seize_land_interaction_tooltip_950 th_seize_land_effect = { scale = 96 } }
		940 = { custom_tooltip = estate_seize_land_interaction_tooltip_940 th_seize_land_effect = { scale = 95 } }
		930 = { custom_tooltip = estate_seize_land_interaction_tooltip_930 th_seize_land_effect = { scale = 94 } }
		920 = { custom_tooltip = estate_seize_land_interaction_tooltip_920 th_seize_land_effect = { scale = 93 } }
		910 = { custom_tooltip = estate_seize_land_interaction_tooltip_910 th_seize_land_effect = { scale = 92 } }
		900 = { custom_tooltip = estate_seize_land_interaction_tooltip_900 th_seize_land_effect = { scale = 91 } }
		890 = { custom_tooltip = estate_seize_land_interaction_tooltip_890 th_seize_land_effect = { scale = 90 } }
		880 = { custom_tooltip = estate_seize_land_interaction_tooltip_880 th_seize_land_effect = { scale = 89 } }
		870 = { custom_tooltip = estate_seize_land_interaction_tooltip_870 th_seize_land_effect = { scale = 88 } }
		860 = { custom_tooltip = estate_seize_land_interaction_tooltip_860 th_seize_land_effect = { scale = 87 } }
		850 = { custom_tooltip = estate_seize_land_interaction_tooltip_850 th_seize_land_effect = { scale = 86 } }
		840 = { custom_tooltip = estate_seize_land_interaction_tooltip_840 th_seize_land_effect = { scale = 85 } }
		830 = { custom_tooltip = estate_seize_land_interaction_tooltip_830 th_seize_land_effect = { scale = 84 } }
		820 = { custom_tooltip = estate_seize_land_interaction_tooltip_820 th_seize_land_effect = { scale = 83 } }
		810 = { custom_tooltip = estate_seize_land_interaction_tooltip_810 th_seize_land_effect = { scale = 82 } }
		800 = { custom_tooltip = estate_seize_land_interaction_tooltip_800 th_seize_land_effect = { scale = 81 } }
		790 = { custom_tooltip = estate_seize_land_interaction_tooltip_790 th_seize_land_effect = { scale = 80 } }
		780 = { custom_tooltip = estate_seize_land_interaction_tooltip_780 th_seize_land_effect = { scale = 79 } }
		770 = { custom_tooltip = estate_seize_land_interaction_tooltip_770 th_seize_land_effect = { scale = 78 } }
		760 = { custom_tooltip = estate_seize_land_interaction_tooltip_760 th_seize_land_effect = { scale = 77 } }
		750 = { custom_tooltip = estate_seize_land_interaction_tooltip_750 th_seize_land_effect = { scale = 76 } }
		740 = { custom_tooltip = estate_seize_land_interaction_tooltip_740 th_seize_land_effect = { scale = 75 } }
		730 = { custom_tooltip = estate_seize_land_interaction_tooltip_730 th_seize_land_effect = { scale = 74 } }
		720 = { custom_tooltip = estate_seize_land_interaction_tooltip_720 th_seize_land_effect = { scale = 73 } }
		710 = { custom_tooltip = estate_seize_land_interaction_tooltip_710 th_seize_land_effect = { scale = 72 } }
		700 = { custom_tooltip = estate_seize_land_interaction_tooltip_700 th_seize_land_effect = { scale = 71 } }
		690 = { custom_tooltip = estate_seize_land_interaction_tooltip_690 th_seize_land_effect = { scale = 70 } }
		680 = { custom_tooltip = estate_seize_land_interaction_tooltip_680 th_seize_land_effect = { scale = 69 } }
		670 = { custom_tooltip = estate_seize_land_interaction_tooltip_670 th_seize_land_effect = { scale = 68 } }
		660 = { custom_tooltip = estate_seize_land_interaction_tooltip_660 th_seize_land_effect = { scale = 67 } }
		650 = { custom_tooltip = estate_seize_land_interaction_tooltip_650 th_seize_land_effect = { scale = 66 } }
		640 = { custom_tooltip = estate_seize_land_interaction_tooltip_640 th_seize_land_effect = { scale = 65 } }
		630 = { custom_tooltip = estate_seize_land_interaction_tooltip_630 th_seize_land_effect = { scale = 64 } }
		620 = { custom_tooltip = estate_seize_land_interaction_tooltip_620 th_seize_land_effect = { scale = 63 } }
		610 = { custom_tooltip = estate_seize_land_interaction_tooltip_610 th_seize_land_effect = { scale = 62 } }
		600 = { custom_tooltip = estate_seize_land_interaction_tooltip_600 th_seize_land_effect = { scale = 61 } }
		590 = { custom_tooltip = estate_seize_land_interaction_tooltip_590 th_seize_land_effect = { scale = 60 } }
		580 = { custom_tooltip = estate_seize_land_interaction_tooltip_580 th_seize_land_effect = { scale = 59 } }
		570 = { custom_tooltip = estate_seize_land_interaction_tooltip_570 th_seize_land_effect = { scale = 58 } }
		560 = { custom_tooltip = estate_seize_land_interaction_tooltip_560 th_seize_land_effect = { scale = 57 } }
		550 = { custom_tooltip = estate_seize_land_interaction_tooltip_550 th_seize_land_effect = { scale = 56 } }
		540 = { custom_tooltip = estate_seize_land_interaction_tooltip_540 th_seize_land_effect = { scale = 55 } }
		530 = { custom_tooltip = estate_seize_land_interaction_tooltip_530 th_seize_land_effect = { scale = 54 } }
		520 = { custom_tooltip = estate_seize_land_interaction_tooltip_520 th_seize_land_effect = { scale = 53 } }
		510 = { custom_tooltip = estate_seize_land_interaction_tooltip_510 th_seize_land_effect = { scale = 52 } }
		500 = { custom_tooltip = estate_seize_land_interaction_tooltip_500 th_seize_land_effect = { scale = 51 } }
		490 = { custom_tooltip = estate_seize_land_interaction_tooltip_490 th_seize_land_effect = { scale = 50 } }
		480 = { custom_tooltip = estate_seize_land_interaction_tooltip_480 th_seize_land_effect = { scale = 49 } }
		470 = { custom_tooltip = estate_seize_land_interaction_tooltip_470 th_seize_land_effect = { scale = 48 } }
		460 = { custom_tooltip = estate_seize_land_interaction_tooltip_460 th_seize_land_effect = { scale = 47 } }
		450 = { custom_tooltip = estate_seize_land_interaction_tooltip_450 th_seize_land_effect = { scale = 46 } }
		440 = { custom_tooltip = estate_seize_land_interaction_tooltip_440 th_seize_land_effect = { scale = 45 } }
		430 = { custom_tooltip = estate_seize_land_interaction_tooltip_430 th_seize_land_effect = { scale = 44 } }
		420 = { custom_tooltip = estate_seize_land_interaction_tooltip_420 th_seize_land_effect = { scale = 43 } }
		410 = { custom_tooltip = estate_seize_land_interaction_tooltip_410 th_seize_land_effect = { scale = 42 } }
		400 = { custom_tooltip = estate_seize_land_interaction_tooltip_400 th_seize_land_effect = { scale = 41 } }
		390 = { custom_tooltip = estate_seize_land_interaction_tooltip_390 th_seize_land_effect = { scale = 40 } }
		380 = { custom_tooltip = estate_seize_land_interaction_tooltip_380 th_seize_land_effect = { scale = 39 } }
		370 = { custom_tooltip = estate_seize_land_interaction_tooltip_370 th_seize_land_effect = { scale = 38 } }
		360 = { custom_tooltip = estate_seize_land_interaction_tooltip_360 th_seize_land_effect = { scale = 37 } }
		350 = { custom_tooltip = estate_seize_land_interaction_tooltip_350 th_seize_land_effect = { scale = 36 } }
		340 = { custom_tooltip = estate_seize_land_interaction_tooltip_340 th_seize_land_effect = { scale = 35 } }
		330 = { custom_tooltip = estate_seize_land_interaction_tooltip_330 th_seize_land_effect = { scale = 34 } }
		320 = { custom_tooltip = estate_seize_land_interaction_tooltip_320 th_seize_land_effect = { scale = 33 } }
		310 = { custom_tooltip = estate_seize_land_interaction_tooltip_310 th_seize_land_effect = { scale = 32 } }
		300 = { custom_tooltip = estate_seize_land_interaction_tooltip_300 th_seize_land_effect = { scale = 31 } }
		290 = { custom_tooltip = estate_seize_land_interaction_tooltip_290 th_seize_land_effect = { scale = 30 } }
		280 = { custom_tooltip = estate_seize_land_interaction_tooltip_280 th_seize_land_effect = { scale = 29 } }
		270 = { custom_tooltip = estate_seize_land_interaction_tooltip_270 th_seize_land_effect = { scale = 28 } }
		260 = { custom_tooltip = estate_seize_land_interaction_tooltip_260 th_seize_land_effect = { scale = 27 } }
		250 = { custom_tooltip = estate_seize_land_interaction_tooltip_250 th_seize_land_effect = { scale = 26 } }
		240 = { custom_tooltip = estate_seize_land_interaction_tooltip_240 th_seize_land_effect = { scale = 25 } }
		230 = { custom_tooltip = estate_seize_land_interaction_tooltip_230 th_seize_land_effect = { scale = 24 } }
		220 = { custom_tooltip = estate_seize_land_interaction_tooltip_220 th_seize_land_effect = { scale = 23 } }
		210 = { custom_tooltip = estate_seize_land_interaction_tooltip_210 th_seize_land_effect = { scale = 22 } }
		200 = { custom_tooltip = estate_seize_land_interaction_tooltip_200 th_seize_land_effect = { scale = 21 } }
		190 = { custom_tooltip = estate_seize_land_interaction_tooltip_190 th_seize_land_effect = { scale = 20 } }
		180 = { custom_tooltip = estate_seize_land_interaction_tooltip_180 th_seize_land_effect = { scale = 19 } }
		170 = { custom_tooltip = estate_seize_land_interaction_tooltip_170 th_seize_land_effect = { scale = 18 } }
		160 = { custom_tooltip = estate_seize_land_interaction_tooltip_160 th_seize_land_effect = { scale = 17 } }
		150 = { custom_tooltip = estate_seize_land_interaction_tooltip_150 th_seize_land_effect = { scale = 16 } }
		140 = { custom_tooltip = estate_seize_land_interaction_tooltip_140 th_seize_land_effect = { scale = 15 } }
		130 = { custom_tooltip = estate_seize_land_interaction_tooltip_130 th_seize_land_effect = { scale = 14 } }
		120 = { custom_tooltip = estate_seize_land_interaction_tooltip_120 th_seize_land_effect = { scale = 13 } }
		110 = { custom_tooltip = estate_seize_land_interaction_tooltip_110 th_seize_land_effect = { scale = 12 } }
		100 = { custom_tooltip = estate_seize_land_interaction_tooltip_100 th_seize_land_effect = { scale = 11 } }
		90 = { custom_tooltip = estate_seize_land_interaction_tooltip_90 th_seize_land_effect = { scale = 10 } }
		80 = { custom_tooltip = estate_seize_land_interaction_tooltip_80 th_seize_land_effect = { scale = 9 } }
		70 = { custom_tooltip = estate_seize_land_interaction_tooltip_70 th_seize_land_effect = { scale = 8 } }
		60 = { custom_tooltip = estate_seize_land_interaction_tooltip_60 th_seize_land_effect = { scale = 7 } }
		50 = { custom_tooltip = estate_seize_land_interaction_tooltip_50 th_seize_land_effect = { scale = 6 } }
		40 = { custom_tooltip = estate_seize_land_interaction_tooltip_40 th_seize_land_effect = { scale = 5 } }
		30 = { custom_tooltip = estate_seize_land_interaction_tooltip_30 th_seize_land_effect = { scale = 4 } }
		20 = { custom_tooltip = estate_seize_land_interaction_tooltip_20 th_seize_land_effect = { scale = 3 } }
		10 = { custom_tooltip = estate_seize_land_interaction_tooltip_10 th_seize_land_effect = { scale = 2 } }
		1 = { custom_tooltip = estate_seize_land_interaction_tooltip_1 th_seize_land_effect = { scale = 1 } }
	}
}

on_completed_agenda_effect_estate_crow_tengu = { }
on_completed_agenda_effect_estate_fairy_pirates = { }
on_completed_agenda_effect_estate_great_tengu = { }
on_completed_agenda_effect_estate_lunarian_rabbits = { }
on_completed_agenda_effect_estate_rival_kaguya = { }
on_completed_agenda_effect_estate_rival_mokou = { }
on_completed_agenda_effect_estate_wolf_tengu = { }
on_completed_agenda_effect_estate_yama = { }

#estate_crow_tengu
#estate_fairy_pirates
#estate_great_tengu
#estate_lunarian_rabbits
#estate_rival_kaguya
#estate_rival_mokou
#estate_wolf_tengu
#estate_yama
th_on_failed_agenda_effect = {
	hidden_effect = {
		clr_country_flag = auto_complete_estate_agenda_estate_crow_tengu
		clr_country_flag = auto_complete_estate_agenda_estate_fairy_pirates
		clr_country_flag = auto_complete_estate_agenda_estate_great_tengu
		clr_country_flag = auto_complete_estate_agenda_estate_lunarian_rabbits
		clr_country_flag = auto_complete_estate_agenda_estate_rival_kaguya
		clr_country_flag = auto_complete_estate_agenda_estate_rival_mokou
		clr_country_flag = auto_complete_estate_agenda_estate_wolf_tengu
		clr_country_flag = auto_complete_estate_agenda_estate_yama
	}
}
th_preemptive_subtract_estate_loyalty = {
	if = {
		limit = {
			has_estate = $estate$
			estate_loyalty = {
				estate = $estate$
				loyalty = $range_loyalty$
			}
		}
		add_estate_loyalty = {
			estate = $estate$
			loyalty = -$loyalty$
		}
	}
	else = {
		set_country_flag = th_$estate$_is_not_in_rage
	}
}
th_retroactive_subtract_estate_loyalty = {
	if = {
		limit = {
			has_estate = $estate$
			has_country_flag = th_$estate$_is_not_in_rage
		}
		add_estate_loyalty = {
			estate = $estate$
			loyalty = -$loyalty$
		}
		clr_country_flag = th_$estate$_is_not_in_rage
	}
}
th_preemptive_add_estate_loyalty = {
	if = {
		limit = {
			has_estate = $estate$
			NOT = {
				estate_loyalty = {
					estate = $estate$
					loyalty = $range_loyalty$
				}
			}
		}
		add_estate_loyalty = {
			estate = $estate$
			loyalty = $loyalty$
		}
	}
	else = {
		set_country_flag = th_$estate$_is_not_in_rage
	}
}
th_retroactive_add_estate_loyalty = {
	if = {
		limit = {
			has_estate = $estate$
			has_country_flag = th_$estate$_is_not_in_rage
		}
		add_estate_loyalty = {
			estate = $estate$
			loyalty = $loyalty$
		}
		clr_country_flag = th_$estate$_is_not_in_rage
	}
}
#add
#subtract
th_preemptive_adjust_estate_loyalty = {
	th_preemptive_$type$_estate_loyalty = { estate = estate_rival_mokou loyalty = $loyalty$ range_loyalty = $range_loyalty$ }
	th_preemptive_$type$_estate_loyalty = { estate = estate_rival_kaguya loyalty = $loyalty$ range_loyalty = $range_loyalty$ }
	th_preemptive_$type$_estate_loyalty = { estate = estate_fairy_pirates loyalty = $loyalty$ range_loyalty = $range_loyalty$ }
	th_preemptive_$type$_estate_loyalty = { estate = estate_yama loyalty = $loyalty$ range_loyalty = $range_loyalty$ }
}
th_retroactive_adjust_estate_loyalty = {
	th_retroactive_$type$_estate_loyalty = { estate = estate_rival_mokou loyalty = $loyalty$ }
	th_retroactive_$type$_estate_loyalty = { estate = estate_rival_kaguya loyalty = $loyalty$ }
	th_retroactive_$type$_estate_loyalty = { estate = estate_fairy_pirates loyalty = $loyalty$ }
	th_retroactive_$type$_estate_loyalty = { estate = estate_yama loyalty = $loyalty$ }
}
th_add_all_estate_loyalty = {
	hidden_effect = { th_preemptive_adjust_estate_loyalty = { loyalty = $loyalty$ range_loyalty = $range_loyalty$ type = subtract } }
	add_estate_loyalty = { estate = all loyalty = $loyalty$ short = yes }
	hidden_effect = { th_retroactive_adjust_estate_loyalty = { loyalty = $loyalty$ type = subtract } }
}
th_subtract_all_estate_loyalty = {
	hidden_effect = { th_preemptive_adjust_estate_loyalty = { loyalty = $loyalty$ range_loyalty = $range_loyalty$ type = add } }
	add_estate_loyalty = { estate = all loyalty = -$loyalty$ short = yes }
	hidden_effect = { th_retroactive_adjust_estate_loyalty = { loyalty = $loyalty$ type = add } }
}
th_change_all_estate_loyalty = {
	th_$type$_all_estate_loyalty = { loyalty = $loyalty$ range_loyalty = $range_loyalty$ }
}

th_subtract_estate_influence = {
	if = {
		limit = {
			has_estate = $estate$
		}
		add_estate_influence_modifier = {
			estate = $estate$
			desc = $counter_desc$
			duration = $duration$
			influence = -$influence$
			short = yes
		}
	}
}

th_add_estate_influence = {
	if = {
		limit = {
			has_estate = $estate$
		}
		add_estate_influence_modifier = {
			estate = $estate$
			desc = $counter_desc$
			duration = $duration$
			influence = $influence$
			short = yes
		}
	}
}
th_add_all_estate_influence = {
	add_estate_influence_modifier = {
		estate = all
		desc = $desc$
		duration = $duration$
		influence = $influence$
		short = yes
	}
	hidden_effect = {
		th_subtract_estate_influence = { estate = estate_rival_mokou counter_desc = $counter_desc$ duration = $duration$ influence = $influence$ }
		th_subtract_estate_influence = { estate = estate_rival_kaguya counter_desc = $counter_desc$ duration = $duration$ influence = $influence$ }
		th_subtract_estate_influence = { estate = estate_fairy_pirates counter_desc = $counter_desc$ duration = $duration$ influence = $influence$ }
		th_subtract_estate_influence = { estate = estate_yama counter_desc = $counter_desc$ duration = $duration$ influence = $influence$ }
	}
}
th_subtract_all_estate_influence = {
	add_estate_influence_modifier = {
		estate = all
		desc = $desc$
		duration = $duration$
		influence = -$influence$
		short = yes
	}
	hidden_effect = {
		th_add_all_estate_influence = { estate = estate_rival_mokou counter_desc = $counter_desc$ duration = $duration$ influence = $influence$ }
		th_add_all_estate_influence = { estate = estate_rival_kaguya counter_desc = $counter_desc$ duration = $duration$ influence = $influence$ }
		th_add_all_estate_influence = { estate = estate_fairy_pirates counter_desc = $counter_desc$ duration = $duration$ influence = $influence$ }
		th_add_all_estate_influence = { estate = estate_yama counter_desc = $counter_desc$ duration = $duration$ influence = $influence$ }
	}
}
th_change_all_estate_influence = {
	th_$type$_all_estate_influence = { desc = $desc$ counter_desc = $counter_desc$ influence = $influence$ duration = $duration$ }
}


th_re_add_loyalty_from_seized_land = {
	hidden_effect = {
		if = {
			limit = {
				has_government_attribute = seizing_land_loyalty
			}
			if = { limit = { estate_has_exempt_from_seize_land_privilege = { estate = estate_crow_tengu } }			add_estate_loyalty = { estate = estate_crow_tengu			 loyalty = 15 } }
			if = { limit = { estate_has_exempt_from_seize_land_privilege = { estate = estate_great_tengu } }		add_estate_loyalty = { estate = estate_great_tengu			 loyalty = 15 } }
			if = { limit = { estate_has_exempt_from_seize_land_privilege = { estate = estate_wolf_tengu } }			add_estate_loyalty = { estate = estate_wolf_tengu			 loyalty = 15 } }
			if = { limit = { estate_has_exempt_from_seize_land_privilege = { estate = estate_lunarian_rabbits } }	add_estate_loyalty = { estate = estate_lunarian_rabbits		 loyalty = 15 } }
			if = { limit = { estate_has_exempt_from_seize_land_privilege = { estate = estate_rival_mokou } }		add_estate_loyalty = { estate = estate_rival_mokou			 loyalty = 15 } }
			if = { limit = { estate_has_exempt_from_seize_land_privilege = { estate = estate_rival_kaguya } }		add_estate_loyalty = { estate = estate_rival_kaguya			 loyalty = 15 } }
			if = { limit = { estate_has_exempt_from_seize_land_privilege = { estate = estate_yama } }				add_estate_loyalty = { estate = estate_yama					 loyalty = 15 } }
			if = { limit = { estate_has_exempt_from_seize_land_privilege = { estate = estate_fairy_pirates } }		add_estate_loyalty = { estate = estate_fairy_pirates		 loyalty = 15 } }
		}
		else = {
			if = { limit = { estate_has_exempt_from_seize_land_privilege = { estate = estate_crow_tengu } }			add_estate_loyalty = { estate = estate_crow_tengu			 loyalty = 20 } }
			if = { limit = { estate_has_exempt_from_seize_land_privilege = { estate = estate_great_tengu } }		add_estate_loyalty = { estate = estate_great_tengu			 loyalty = 20 } }
			if = { limit = { estate_has_exempt_from_seize_land_privilege = { estate = estate_wolf_tengu } }			add_estate_loyalty = { estate = estate_wolf_tengu			 loyalty = 20 } }
			if = { limit = { estate_has_exempt_from_seize_land_privilege = { estate = estate_lunarian_rabbits } }	add_estate_loyalty = { estate = estate_lunarian_rabbits		 loyalty = 20 } }
			if = { limit = { estate_has_exempt_from_seize_land_privilege = { estate = estate_rival_mokou } }		add_estate_loyalty = { estate = estate_rival_mokou			 loyalty = 20 } }
			if = { limit = { estate_has_exempt_from_seize_land_privilege = { estate = estate_rival_kaguya } }		add_estate_loyalty = { estate = estate_rival_kaguya			 loyalty = 20 } }
			if = { limit = { estate_has_exempt_from_seize_land_privilege = { estate = estate_yama } }				add_estate_loyalty = { estate = estate_yama					 loyalty = 20 } }
			if = { limit = { estate_has_exempt_from_seize_land_privilege = { estate = estate_fairy_pirates } }		add_estate_loyalty = { estate = estate_fairy_pirates		 loyalty = 20 } }
		}
	}
}